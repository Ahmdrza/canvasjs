(function(){"use strict";function t(t,i){t.prototype=e(i.prototype),t.prototype.constructor=t,t.parent=i.prototype}function e(t){function e(){}return e.prototype=t,new e}function i(t,e,i){return"millisecond"===i?t.setMilliseconds(t.getMilliseconds()+1*e):"second"===i?t.setSeconds(t.getSeconds()+1*e):"minute"===i?t.setMinutes(t.getMinutes()+1*e):"hour"===i?t.setHours(t.getHours()+1*e):"day"===i?t.setDate(t.getDate()+1*e):"week"===i?t.setDate(t.getDate()+7*e):"month"===i?t.setMonth(t.getMonth()+1*e):"year"===i&&t.setFullYear(t.getFullYear()+1*e),t}function a(t,e){return F[e+"Duration"]*t}function n(t,e){var i=!1;for(0>t&&(i=!0,t*=-1),t=""+t,e=e?e:1;e>t.length;)t="0"+t;return i?"-"+t:t}function s(t){t=t.replace(/^\s\s*/,"");for(var e=/\s/,i=t.length;e.test(t.charAt(--i)););return t.slice(0,i+1)}function o(t){t.roundRect=function(t,e,i,a,n,s,o,r){o&&(this.fillStyle=o),r&&(this.strokeStyle=r),n===void 0&&(n=5),this.lineWidth=s,this.beginPath(),this.moveTo(t+n,e),this.lineTo(t+i-n,e),this.quadraticCurveTo(t+i,e,t+i,e+n),this.lineTo(t+i,e+a-n),this.quadraticCurveTo(t+i,e+a,t+i-n,e+a),this.lineTo(t+n,e+a),this.quadraticCurveTo(t,e+a,t,e+a-n),this.lineTo(t,e+n),this.quadraticCurveTo(t,e,t+n,e),this.closePath(),o&&this.fill(),r&&s>0&&this.stroke()}}function r(t,e){return t-e}function h(t,e){return t.x-e.x}function l(t){var e=((16711680&t)>>16).toString(16),i=((65280&t)>>8).toString(16),a=((255&t)>>0).toString(16);return e=2>e.length?"0"+e:e,i=2>i.length?"0"+i:i,a=2>a.length?"0"+a:a,"#"+e+i+a}function d(t,e,i){var a=t<<16|e<<8|i;return a}function c(t){var e=[],i=(16711680&t)>>16,a=(65280&t)>>8,n=(255&t)>>0;return e[0]=i,e[1]=a,e[2]=n,e}function x(t,e,i){for(var a=i.getImageData(t,e,2,2).data,n=!0,s=0;4>s;s++)if(a[s]!==a[s+4]|a[s]!==a[s+8]|a[s]!==a[s+12]){n=!1;break}return n?d(a[0],a[1],a[2]):0}function m(t,e,i){var a="",n=t?t+"FontStyle":"fontStyle",s=t?t+"FontWeight":"fontWeight",o=t?t+"FontSize":"fontSize",r=t?t+"FontFamily":"fontFamily";return a+=e[n]?e[n]+" ":i&&i[n]?i[n]+" ":"",a+=e[s]?e[s]+" ":i&&i[s]?i[s]+" ":"",a+=e[o]?e[o]+"px ":i&&i[o]?i[o]+"px ":"",a+=e[r]?e[r]+" ":i&&i[r]?i[r]+" ":""}function p(t,e,i){var a=t in e?e[t]:i[t];return a}function u(t,e,i){this._defaultsKey=t;var a={};i&&z[i]&&z[i][t]&&(a=z[i][t]),this._options=e?e:{},this.setOptions(this._options,a)}function g(t,e,i){g.parent.constructor.call(this,"Chart",e,e.theme?e.theme:"theme1"),g.externalReference=i;var a=this;if(this._containerId=t,this._objectsInitialized=!1,this.ctx=null,this.overlaidCanvasCtx=null,this._indexLabels=[],this._panTimerId=0,this._lastTouchEventType="",this.panEnabled=!1,this._defaultCursor="default",this._container=document.getElementById(this._containerId),this._container){var n=0,s=0;n=this._options.width?this.width:this._container.clientWidth>0?this._container.clientWidth:this.width,s=this._options.height?this.height:this._container.clientHeight>0?this._container.clientHeight:this.height,this.width=n,this.height=s,this._canvasJSContainer=document.createElement("div"),this._canvasJSContainer.style.position="relative",this._container.appendChild(this._canvasJSContainer),this.canvas=document.createElement("canvas"),this.canvas.width=n,this.canvas.height=s,this.canvas.style.background=this.backgroundColor,this.canvas.style.position="absolute",this._canvasJSContainer.appendChild(this.canvas),this.overlaidCanvas=document.createElement("canvas"),this.overlaidCanvas.width=n,this.overlaidCanvas.height=s,this.overlaidCanvas.style.position="absolute",this._canvasJSContainer.appendChild(this.overlaidCanvas),this._eventManager=new _(this),this._toolBar=document.createElement("div"),this._toolBar.style.position="absolute",this._toolBar.style.top="0px",this._toolBar.style.right="0px",this._canvasJSContainer.appendChild(this._toolBar),this.zoomEnabled&&(this._zoomButton=document.createElement("button"),this._zoomButton.appendChild(document.createTextNode("Pan")),this._toolBar.appendChild(this._zoomButton),this._zoomButton.addEventListener("click",function(){a.zoomEnabled?(a.zoomEnabled=!1,a.panEnabled=!0,a._zoomButton.innerHTML=a._cultureInfo.zoomText,a._defaultCursor="move",a.overlaidCanvas.style.cursor=a._defaultCursor):(a.zoomEnabled=!0,a.panEnabled=!1,a._zoomButton.innerHTML=a._cultureInfo.panText,a._defaultCursor="default",a.overlaidCanvas.style.cursor=a._defaultCursor),a.render()},!1)),this.zoomEnabled&&(this._resetButton=document.createElement("button"),this._resetButton.appendChild(document.createTextNode("Reset")),this._toolBar.appendChild(this._resetButton),this._options.zoomEnabled?(this.zoomEnabled=!0,this.panEnabled=!1):(this.zoomEnabled=!1,this.panEnabled=!1),this.overlaidCanvas.style.cursor=a._defaultCursor,this._resetButton.addEventListener("click",function(){a._toolTip.hide(),a.zoomEnabled||a.panEnabled?(a.zoomEnabled=!0,a.panEnabled=!1,a._zoomButton.innerHTML=a._cultureInfo.panText,a._defaultCursor="default",a.overlaidCanvas.style.cursor=a._defaultCursor):(a.zoomEnabled=!1,a.panEnabled=!1),a.sessionVariables.axisX.internalMinimum=a._options.axisX&&a._options.axisX.minimum?a._options.axisX.minimum:null,a.sessionVariables.axisX.internalMaximum=a._options.axisX&&a._options.axisX.maximum?a._options.axisX.maximum:null,a.resetOverlayedCanvas(),a.render()},!1)),window.addEventListener("resize",function(){var t=0,e=0;t=a._options.width?a.width:a._container.clientWidth>0?a._container.clientWidth:a.width,e=a._options.height?a.height:a._container.clientHeight>0?a._container.clientHeight:a.height,(a.canvas.width!==t||a.canvas.height!==e)&&(a.renderCount--,a.canvas.width=t,a.canvas.height=e,a.overlaidCanvas.width=t,a.overlaidCanvas.height=e,a.render())}),this._toolBar.style.display="none",this.bounds={x1:0,y1:0,x2:this.canvas.width,y2:this.canvas.height},this.canvas.getContext&&(this.ctx=this.canvas.getContext("2d"),this.ctx.textBaseline="top",this.overlaidCanvasCtx=this.overlaidCanvas.getContext("2d"),this.overlaidCanvasCtx.textBaseline="top",o(this.ctx),this.overlaidCanvas.addEventListener("click",function(t){a._mouseEventHandler(t)},!1),this.overlaidCanvas.addEventListener("mousemove",function(t){a._mouseEventHandler(t)},!1),this.overlaidCanvas.addEventListener("mouseup",function(t){a._mouseEventHandler(t)},!1),this.overlaidCanvas.addEventListener("mousedown",function(t){a._mouseEventHandler(t)},!1),this.overlaidCanvas.addEventListener("mouseout",function(t){a._mouseEventHandler(t)},!1),this.overlaidCanvas.addEventListener(window.navigator.msPointerEnabled?"MSPointerDown":"touchstart",function(t){a._touchEventHandler(t)},!1),this.overlaidCanvas.addEventListener(window.navigator.msPointerEnabled?"MSPointerMove":"touchmove",function(t){a._touchEventHandler(t)},!1),this.overlaidCanvas.addEventListener(window.navigator.msPointerEnabled?"MSPointerUp":"touchend",function(t){a._touchEventHandler(t)},!1),this.overlaidCanvas.addEventListener(window.navigator.msPointerEnabled?"MSPointerCancel":"touchcancel",function(t){a._touchEventHandler(t)},!1)),this._toolTip=new C(this,this._options.toolTip,this.theme),this.layoutManager=new y(this.canvas),this.data=null,this.axisX=null,this.axisY=null,this.axisY2=null,this.renderCount=0,this.creditText&&this.creditHref&&(this._creditLink=document.createElement("a"),this._creditLink.setAttribute("style","outline:none;margin:0px;position:absolute;right:3px;top:"+(s-14)+"px;color:dimgrey;text-decoration:none;font-size:10px;font-family:Lucida Grande, Lucida Sans Unicode, Arial, sans-serif"),this._creditLink.setAttribute("tabIndex",-1),this._creditLink.setAttribute("href",this.creditHref),this._creditLink.innerHTML=this.creditText,this._creditLink.setAttribute("target","_blank"),this._canvasJSContainer.appendChild(this._creditLink)),this.sessionVariables={axisX:{internalMinimum:null,internalMaximum:null},axisY:{internalMinimum:null,internalMaximum:null},axisY2:{internalMinimum:null,internalMaximum:null}}}}function v(t,e){for(var i=[],a=0;t.length>a;a++)if(0!==a){var n,s,o;o=a-1,n=0===o?0:o-1,s=o===t.length-1?o:o+1;var r={x:(t[s].x-t[n].x)/e,y:(t[s].y-t[n].y)/e},h={x:t[o].x+r.x/3,y:t[o].y+r.y/3};i[i.length]=h,o=a,n=0===o?0:o-1,s=o===t.length-1?o:o+1;var l={x:(t[s].x-t[n].x)/e,y:(t[s].y-t[n].y)/e},d={x:t[o].x-l.x/3,y:t[o].y-l.y/3};i[i.length]=d,i[i.length]=t[a]}else i.push(t[0]);return i}function y(t){this._topOccupied=0,this._bottomOccupied=0,this._leftOccupied=0,this._rightOccupied=0,this.canvas=t}function f(t,e){f.parent.constructor.call(this,"TextBlock",e),this.ctx=t,this._isDirty=!0,this._wrappedText=null}function b(t,e){b.parent.constructor.call(this,"Title",e,t.theme),this.chart=t,this.canvas=t.canvas,this.ctx=this.chart.ctx,this._options.fontSize===void 0&&(this.fontSize=this.chart.getAutoFontSize(this.fontSize)),this.width=null,this.height=null,this.bounds={x1:null,y1:null,x2:null,y2:null}}function P(t,e,i){P.parent.constructor.call(this,"Legend",e,i),this.chart=t,this.canvas=t.canvas,this.ctx=this.chart.ctx,this.width=0,this.height=0,this.orientation=null,this.horizontalSpacing=10,this.dataSeries=[],this.bounds={x1:null,y1:null,x2:null,y2:null}}function M(t,e){M.parent.constructor.call(this,e),this.chart=t,this.canvas=t.canvas,this.ctx=this.chart.ctx}function S(t,e,i,a,n){S.parent.constructor.call(this,"DataSeries",e,i),this.chart=t,this.canvas=t.canvas,this._ctx=t.canvas.ctx,this.index=a,this.noDataPointsInPlotArea=0,this.id=n,this.dataPointIds=[],this.axisX=null,this.axisY=null,this.axisPlacement=this.getDefaultAxisPlacement()}function T(t,e,i,a){T.parent.constructor.call(this,"Axis",e,t.theme),this.chart=t,this.canvas=t.canvas,this.ctx=t.ctx,this.maxWidth=0,this.maxHeight=0,this.intervalStartPosition=0,this.labels=[],this.dataInfo={min:1/0,max:-1/0,viewPortMin:1/0,viewPortMax:-1/0,minDiff:1/0},"axisX"===i?(this.sessionVariables=this.chart.sessionVariables[i],this._options.interval||(this.intervalType=null)):this.sessionVariables="left"===a||"top"===a?this.chart.sessionVariables.axisY:this.chart.sessionVariables.axisY2,this._options.titleFontSize===void 0&&(this.titleFontSize=this.chart.getAutoFontSize(this.titleFontSize)),this._options.labelFontSize===void 0&&(this.labelFontSize=this.chart.getAutoFontSize(this.labelFontSize)),this.type=i,e&&void 0!==e.gridThickness||(this.gridThickness="axisX"===i?0:1),this._labels=null,this._position=a,this.lineCoordinates={x1:null,y1:null,x2:null,y2:null,width:null},this.labelAngle=(this.labelAngle%360+360)%360,this.labelAngle>90&&270>=this.labelAngle?this.labelAngle-=180:this.labelAngle>180&&270>=this.labelAngle?this.labelAngle-=180:this.labelAngle>270&&360>=this.labelAngle&&(this.labelAngle-=360),this._titleTextBlock=null,this._absoluteMinimum=null,this._absoluteMaximum=null,this.hasOptionChanged("minimum")&&(this.sessionVariables.internalMinimum=this.minimum),this.hasOptionChanged("maximum")&&(this.sessionVariables.internalMaximum=this.maximum),this.trackChanges("minimum"),this.trackChanges("maximum")}function C(t,e,i){C.parent.constructor.call(this,"ToolTip",e,i),this.chart=t,this.canvas=t.canvas,this.ctx=this.chart.ctx,this.currentSeriesIndex=-1,this.currentDataPointIndex=-1,this._timerId=0,this._prevX=0/0,this._prevY=0/0,this._initialize()}function _(t){this.chart=t,this.lastObjectId=0,this.objectMap=[],this.rectangularRegionEventSubscriptions=[],this.previousDataPointEventObject=null,this.ghostCanvas=document.createElement("canvas"),this.ghostCanvas.width=this.chart.canvas.width,this.ghostCanvas.height=this.chart.canvas.height,this.ghostCtx=this.ghostCanvas.getContext("2d")}function k(t,e){var i;e&&A[e]&&(i=A[e]),b.parent.constructor.call(this,"CultureInfo",i,t.theme),this.chart=t,this.canvas=t.canvas,this.ctx=this.chart.ctx}var w=!1,I={Chart:{width:500,height:400,zoomEnabled:!1,backgroundColor:"white",theme:"theme1",animationEnabled:!0,colorSet:"colorSet1",culture:"en",creditHref:"http://canvasjs.com/",creditText:"CanvasJS.com"},CultureInfo:{decimalSeparator:".",digitGroupSeparator:",",zoomText:"Zoom",panText:"Pan",resetText:"Reset",days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]},Title:{padding:0,text:null,verticalAlign:"top",horizontalAlign:"center",fontSize:20,fontFamily:"Calibri",fontWeight:"normal",fontColor:"black",fontStyle:"normal",borderThickness:0,borderColor:"black",cornerRadius:0,backgroundColor:null,margin:5},DataSeries:{name:null,dataPoints:null,label:"",bevelEnabled:!1,cursor:null,indexLabel:"",indexLabelPlacement:"outside",indexLabelOrientation:"horizontal",indexLabelFontColor:"black",indexLabelFontSize:12,indexLabelFontStyle:"normal",indexLabelFontFamily:"Arial",indexLabelFontWeight:"normal",indexLabelBackgroundColor:null,indexLabelLineColor:"#808080",indexLabelLineThickness:1,lineThickness:2,color:null,startAngle:0,type:"column",xValueType:"number",axisYType:"primary",xValueFormatString:null,yValueFormatString:null,showInLegend:null,legendMarkerType:null,legendMarkerColor:null,legendText:null,markerType:"circle",markerColor:null,markerSize:null,markerBorderColor:null,markerBorderThickness:null,mouseover:null,mouseout:null,mousemove:null,click:null,toolTipContent:null},Axis:{minimum:null,maximum:null,interval:null,intervalType:null,title:null,titleFontColor:"black",titleFontSize:20,titleFontFamily:"arial",titleFontWeight:"normal",titleFontStyle:"normal",labelAngle:0,labelFontFamily:"arial",labelFontColor:"black",labelFontSize:12,labelFontWeight:"normal",labelFontStyle:"normal",prefix:"",suffix:"",includeZero:!0,tickLength:5,tickColor:"black",tickThickness:1,lineColor:"black",lineThickness:1,gridColor:"A0A0A0",gridThickness:0,interlacedColor:null,valueFormatString:null,margin:2},Legend:{name:null,borderThickness:0,borderColor:"black",cornerRadius:0,verticalAlign:"center",horizontalAlign:"right",fontSize:14,fontFamily:"Calibri",fontWeight:"normal",fontColor:"black",fontStyle:"normal"},ToolTip:{enabled:!0,borderColor:null,shared:!1,animationEnabled:!0,content:null},TextBlock:{x:0,y:0,width:null,height:null,maxWidth:null,maxHeight:null,padding:0,angle:0,text:"",horizontalAlign:"center",fontSize:12,fontFamily:"Calibri",fontWeight:"normal",fontColor:"black",fontStyle:"normal",borderThickness:0,borderColor:"black",cornerRadius:0,backgroundColor:null,textBaseline:"top"}},A={en:{}},X={colorSet1:["#369EAD","#C24642","#7F6084","#86B402","#A2D1CF","#C8B631","#6DBCEB","#52514E","#4F81BC","#A064A1","#F79647"],colorSet2:["#4F81BC","#C0504E","#9BBB58","#23BFAA","#8064A1","#4AACC5","#F79647"],colorSet3:["#8CA1BC","#36845C","#017E82","#8CB9D0","#708C98","#94838D","#F08891","#0366A7","#008276","#EE7757","#E5BA3A","#F2990B","#03557B","#782970"]},z={theme1:{Chart:{colorSet:X[0]},Title:{fontFamily:"Calibri, Optima, Candara, Verdana, Geneva, sans-serif",fontSize:33,fontColor:"#3A3A3A",fontWeight:"bold",verticalAlign:"top",margin:10},Axis:{titleFontSize:26,titleFontColor:"#666666",titleFontFamily:"Calibri, Optima, Candara, Verdana, Geneva, sans-serif",labelFontFamily:"Calibri, Optima, Candara, Verdana, Geneva, sans-serif",labelFontSize:18,labelFontColor:"grey",tickColor:"#BBBBBB",tickThickness:2,gridThickness:2,gridColor:"#BBBBBB",lineThickness:2,lineColor:"#BBBBBB"},Legend:{verticalAlign:"bottom",horizontalAlign:"center",fontFamily:"monospace, sans-serif,arial black"},DataSeries:{indexLabelFontColor:"grey",indexLabelFontFamily:"Calibri, Optima, Candara, Verdana, Geneva, sans-serif",indexLabelFontSize:18,indexLabelLineColor:"lightgrey",indexLabelLineThickness:2}},theme2:{Chart:{colorSet:"colorSet2"},Title:{fontFamily:"impact, charcoal, arial black, sans-serif",fontSize:32,fontColor:"#333333",verticalAlign:"top",margin:10},Axis:{titleFontSize:22,titleFontColor:"rgb(98,98,98)",titleFontFamily:"monospace, sans-serif,arial black",titleFontWeight:"bold",labelFontFamily:"monospace, Courier New, Courier",labelFontSize:16,labelFontColor:"grey",labelFontWeight:"bold",tickColor:"grey",tickThickness:2,gridThickness:2,gridColor:"grey",lineThickness:0},Legend:{verticalAlign:"bottom",horizontalAlign:"center",fontFamily:"monospace, sans-serif,arial black"},DataSeries:{indexLabelFontColor:"grey",indexLabelFontFamily:"Courier New, Courier, monospace",indexLabelFontWeight:"bold",indexLabelFontSize:18,indexLabelLineColor:"lightgrey",indexLabelLineThickness:2}},theme3:{Chart:{colorSet:"colorSet1"},Title:{fontFamily:"Candara, Optima, Trebuchet MS, Helvetica Neue, Helvetica, Trebuchet MS, serif",fontSize:32,fontColor:"#3A3A3A",fontWeight:"bold",verticalAlign:"top",margin:10},Axis:{titleFontSize:22,titleFontColor:"rgb(98,98,98)",titleFontFamily:"Verdana, Geneva, Calibri, sans-serif",labelFontFamily:"Calibri, Optima, Candara, Verdana, Geneva, sans-serif",labelFontSize:18,labelFontColor:"grey",tickColor:"grey",tickThickness:2,gridThickness:2,gridColor:"grey",lineThickness:2,lineColor:"grey"},Legend:{verticalAlign:"bottom",horizontalAlign:"center",fontFamily:"monospace, sans-serif,arial black"},DataSeries:{bevelEnabled:!0,indexLabelFontColor:"grey",indexLabelFontFamily:"Candara, Optima, Calibri, Verdana, Geneva, sans-serif",indexLabelFontSize:18,indexLabelLineColor:"lightgrey",indexLabelLineThickness:2}}},F={numberDuration:1,yearDuration:314496e5,monthDuration:2592e6,weekDuration:6048e5,dayDuration:864e5,hourDuration:36e5,minuteDuration:6e4,secondDuration:1e3,millisecondDuration:1,dayOfWeekFromInt:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},L=function(){var t=/D{1,4}|M{1,4}|Y{1,4}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|f{1,3}|t{1,2}|T{1,2}|K|z{1,3}|"[^"]*"|'[^']*'/g,e=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],i=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],a=["January","February","March","April","May","June","July","August","September","October","November","December"],s=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],o=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,r=/[^-+\dA-Z]/g;return function(h,l,d){var c=d?d.days:e,x=d?d.months:a,m=d?d.shortDays:i,p=d?d.shortMonths:s,u="",g=!1;if(h=h&&h.getTime?h:h?new Date(h):new Date,isNaN(h))throw new SyntaxError("invalid date");"UTC:"==l.slice(0,4)&&(l=l.slice(4),g=!0);var v=g?"getUTC":"get",y=h[v+"Date"](),f=h[v+"Day"](),b=h[v+"Month"](),P=h[v+"FullYear"](),M=h[v+"Hours"](),S=h[v+"Minutes"](),T=h[v+"Seconds"](),C=h[v+"Milliseconds"](),_=g?0:h.getTimezoneOffset();return u=l.replace(t,function(t){switch(t){case"D":return y;case"DD":return n(y,2);case"DDD":return m[f];case"DDDD":return c[f];case"M":return b+1;case"MM":return n(b+1,2);case"MMM":return p[b];case"MMMM":return x[b];case"Y":return parseInt((P+"").slice(-2),10);case"YY":return n((P+"").slice(-2),2);case"YYY":return n((P+"").slice(-3),3);case"YYYY":return n(P,4);case"h":return M%12||12;case"hh":return n(M%12||12,2);case"H":return M;case"HH":return n(M,2);case"m":return S;case"mm":return n(S,2);case"s":return T;case"ss":return n(T,2);case"f":return(C+"").slice(0,1);case"ff":return n((C+"").slice(0,2),2);case"fff":return n((C+"").slice(0,3),3);case"t":return 12>M?"a":"p";case"tt":return 12>M?"am":"pm";case"T":return 12>M?"A":"P";case"TT":return 12>M?"AM":"PM";case"K":return g?"UTC":((h+"").match(o)||[""]).pop().replace(r,"");case"z":return(_>0?"-":"+")+Math.floor(Math.abs(_)/60);case"zz":return(_>0?"-":"+")+n(Math.floor(Math.abs(_)/60),2);case"zzz":return(_>0?"-":"+")+n(Math.floor(Math.abs(_)/60),2)+n(Math.abs(_)%60,2);default:return t.slice(1,t.length-1)}})}}(),B=function(t,e,i){t=Number(t);var a=0>t?!0:!1;a&&(t*=-1);var s=i?i.decimalSeparator:".",o=i?i.digitGroupSeparator:",",r="";e+="";for(var h,l=1,d="",c=-1,x=[],m=[],p=0,u=0,g=0,v=!1,y=0,f=e.match(/"[^"]*"|'[^']*'|[eE][+-]*[0]+|[,]+[.]|‰|./g),b=0;f&&f.length>b;b++)if(h=f[b],"."===h&&0>c)c=b;else{if("%"===h)l*=100;else{if("‰"===h){l*=1e3;continue}if(","===h[0]&&"."===h[h.length-1]){l/=Math.pow(1e3,h.length-1),c=b+h.length-1;continue}"E"!==h[0]&&"e"!==h[0]||"0"!==h[h.length-1]||(v=!0)}0>c?(x.push(h),"#"===h||"0"===h?p++:","===h&&g++):(m.push(h),("#"===h||"0"===h)&&u++)}if(v){var P=Math.floor(t);y=(0===P?"":P+"").length-p,l/=Math.pow(10,y)}t*=l,0>c&&(c=b),r=t.toFixed(u);var M=r.split("."),S=(M[0]+"").split(""),T=(M[1]+"").split("");S&&"0"===S[0]&&S.shift();for(var C=0,_=0,k=0,w=0,I=0,A=function(t){return n(y,t.length)};x.length>0;)if(h=x.pop(),"#"===h||"0"===h)if(C++,C===p){var X=S;if(S=[],"0"===h)for(var z=p-_-(X?X.length:0);z>0;)X.unshift("0"),z--;for(;X.length>0;)d=X.pop()+d,I++,0===I%w&&k===g&&X.length>0&&(d=o+d);a&&(d="-"+d)}else S.length>0?(d=S.pop()+d,_++,I++):"0"===h&&(d="0"+d,_++,I++),0===I%w&&k===g&&S.length>0&&(d=o+d);else"E"!==h[0]&&"e"!==h[0]||"0"!==h[h.length-1]||!/[eE][+-]*[0]+/.test(h)?","===h?(k++,w=I,I=0,S.length>0&&(d=o+d)):d=h.length>1&&('"'===h[0]&&'"'===h[h.length-1]||"'"===h[0]&&"'"===h[h.length-1])?h.slice(1,h.length-1)+d:h+d:(h=0>y?h.replace("+","").replace("-",""):h.replace("-",""),d+=h.replace(/[0]+/,A));for(var F=0;m.length>0;)h=m.shift(),"#"===h||"0"===h?T.length>0&&0!==Number(T.join(""))?d+=(0===F++?s:"")+T.shift():"0"===h&&(d+=(0===F++?s:"")+"0"):h.length>1&&('"'===h[0]&&'"'===h[h.length-1]||"'"===h[0]&&"'"===h[h.length-1])?d+=(0===F++?s:"")+h.slice(1,h.length-1):"E"!==h[0]&&"e"!==h[0]||"0"!==h[h.length-1]||!/[eE][+-]*[0]+/.test(h)?d+=(0===F++?s:"")+h:(h=0>y?h.replace("+","").replace("-",""):h=h.replace("-",""),d+=h.replace(/[0]+/,A));return d},Y=function(t){var e=0,i=0;return t||(t=window.event),t.offsetX||0===t.offsetX?(e=t.offsetX,i=t.offsetY):t.layerX||0===t.layerX?(e=t.layerX,i=t.layerY):(e=t.pageX-t.target.offsetLeft,i=t.pageY-t.target.offsetTop),{x:e,y:i}};u.prototype.setOptions=function(t,e){if(I[this._defaultsKey]){var i=I[this._defaultsKey];for(var a in i)this[a]=t&&a in t?t[a]:e&&a in e?e[a]:i[a]}else w&&window.console&&console.log("defaults not set")},u.prototype.trackChanges=function(t){this._options._oldOptions||(this._options._oldOptions={}),this._options._oldOptions[t]=this._options[t]},u.prototype.isBeingTracked=function(t){return this._options._oldOptions||(this._options._oldOptions={}),this._options._oldOptions[t]?!0:!1},u.prototype.hasOptionChanged=function(t){return this._options._oldOptions||(this._options._oldOptions={}),this._options._oldOptions[t]!==this._options[t]},t(g,u),g.prototype._initialize=function(){this._selectedColorSet=X[this.colorSet]!==void 0?X[this.colorSet]:X.colorSet1,this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.ctx.beginPath(),this.axisX=null,this.axisY=null,this.axisY2=null,this._indexLabels=[],this._events=[],this._eventManager&&this._eventManager.reset(),this.plotInfo={axisPlacement:null,axisXValueType:null,plotTypes:[]},this.layoutManager.reset(),this._cultureInfo=new k(this,this._options.culture),this.data=[];for(var t=0,e=0;this._options.data.length>e;e++)if(t++,!this._options.data[e].type||g._supportedChartTypes.indexOf(this._options.data[e].type)>=0){var i=new S(this,this._options.data[e],this.theme,t-1,++this._eventManager.lastObjectId);null===i.name&&(i.name="DataSeries "+t),null===i.color?this._options.data.length>1?(i._colorSet=[this._selectedColorSet[i.index%this._selectedColorSet.length]],i.color=this._selectedColorSet[i.index%this._selectedColorSet.length]):i._colorSet="line"===i.type||"stepLine"===i.type||"spline"===i.type||"area"===i.type||"splineArea"===i.type||"stackedArea"===i.type||"stackedArea100"===i.type?[this._selectedColorSet[0]]:this._selectedColorSet:i._colorSet=[i.color],null===i.markerSize&&(("line"===i.type||"stepLine"===i.type||"spline"===i.type)&&this.canvas.width/16>i.dataPoints.length||"scatter"===i.type)&&(i.markerSize=8),("bubble"===i.type||"scatter"===i.type)&&i.dataPoints.sort(h),this.data.push(i);var a,n=i.axisPlacement;if("normal"===n?"xySwapped"===this.plotInfo.axisPlacement?a='You cannot combine "'+i.type+'" with bar chart':"none"===this.plotInfo.axisPlacement?a='You cannot combine "'+i.type+'" with pie chart':null===this.plotInfo.axisPlacement&&(this.plotInfo.axisPlacement="normal"):"xySwapped"===n?"normal"===this.plotInfo.axisPlacement?a='You cannot combine "'+i.type+'" with line, area, column or pie chart':"none"===this.plotInfo.axisPlacement?a='You cannot combine "'+i.type+'" with pie chart':null===this.plotInfo.axisPlacement&&(this.plotInfo.axisPlacement="xySwapped"):"none"==n&&("normal"===this.plotInfo.axisPlacement?a='You cannot combine "'+i.type+'" with line, area, column or bar chart':"xySwapped"===this.plotInfo.axisPlacement?a='You cannot combine "'+i.type+'" with bar chart':null===this.plotInfo.axisPlacement&&(this.plotInfo.axisPlacement="none")),a&&window.console)return window.console.log(a),void 0}this._objectsInitialized=!0},g._supportedChartTypes=["line","stepLine","spline","column","area","splineArea","bar","bubble","scatter","stackedColumn","stackedColumn100","stackedBar","stackedBar100","stackedArea","stackedArea100","pie","doughnut"],g.prototype.render=function(){this._initialize();for(var t=0;this.data.length>t;t++)("normal"===this.plotInfo.axisPlacement||"xySwapped"===this.plotInfo.axisPlacement)&&(this.data[t].axisYType&&"primary"!==this.data[t].axisYType?"secondary"===this.data[t].axisYType&&(this.axisY2||("normal"===this.plotInfo.axisPlacement?this.axisY2=new T(this,this._options.axisY2,"axisY","right"):"xySwapped"===this.plotInfo.axisPlacement&&(this.axisY2=new T(this,this._options.axisY2,"axisY","top"))),this.data[t].axisY=this.axisY2):(this.axisY||("normal"===this.plotInfo.axisPlacement?this.axisY=new T(this,this._options.axisY,"axisY","left"):"xySwapped"===this.plotInfo.axisPlacement&&(this.axisY=new T(this,this._options.axisY,"axisY","bottom"))),this.data[t].axisY=this.axisY),this.axisX||("normal"===this.plotInfo.axisPlacement?this.axisX=new T(this,this._options.axisX,"axisX","bottom"):"xySwapped"===this.plotInfo.axisPlacement&&(this.axisX=new T(this,this._options.axisX,"axisX","left"))),this.data[t].axisX=this.axisX);for(this._processData(),this._options.title&&(this._title=new b(this,this._options.title),this._title.render()),this.legend=new P(this,this._options.legend,this.theme),t=0;this.data.length>t;t++)this.data[t].showInLegend&&this.legend.dataSeries.push(this.data[t]);if(this.legend.render(),"normal"===this.plotInfo.axisPlacement||"xySwapped"===this.plotInfo.axisPlacement)T.setLayoutAndRender(this.axisX,this.axisY,this.axisY2,this.plotInfo.axisPlacement,this.layoutManager.getFreeSpace());else if("none"!==this.plotInfo.axisPlacement)return;for(t=0;this.plotInfo.plotTypes.length>t;t++)for(var e=this.plotInfo.plotTypes[t],i=0;e.plotUnits.length>i;i++){var a=e.plotUnits[i];"line"===a.type?this.renderLine(a):"stepLine"===a.type?this.renderStepLine(a):"spline"===a.type?this.renderSpline(a):"column"===a.type?this.renderColumn(a):"bar"===a.type?this.renderBar(a):"area"===a.type?this.renderArea(a):"splineArea"===a.type?this.renderSplineArea(a):"stackedColumn"===a.type?this.renderStackedColumn(a):"stackedColumn100"===a.type?this.renderStackedColumn100(a):"stackedBar"===a.type?this.renderStackedBar(a):"stackedBar100"===a.type?this.renderStackedBar100(a):"stackedArea"===a.type?this.renderStackedArea(a):"stackedArea100"===a.type?this.renderStackedArea100(a):"bubble"===a.type?this.renderBubble(a):"scatter"===a.type?this.renderScatter(a):"pie"===a.type?this.renderPie(a):"doughnut"===a.type&&this.renderPie(a)}if(this._indexLabels.length>0&&this.renderIndexLabels(),this.attachPlotAreaEventHandlers(),this.zoomEnabled||this.panEnabled||"none"===this._toolBar.style.display||(this._toolBar.style.display="none"),this._toolTip._updateToolTip(),this.renderCount++,w){var n=this;setTimeout(function(){var t=document.getElementById("ghostCanvasCopy");if(t){var e=t.getContext("2d");e.drawImage(n._eventManager.ghostCanvas,0,0)}},2e3)}},g.prototype.attachPlotAreaEventHandlers=function(){this.attachEvent({context:this,chart:this,mousedown:this._plotAreaMouseDown,mouseup:this._plotAreaMouseUp,mousemove:this._plotAreaMouseMove,capture:!0,bounds:this.getPlotArea()})},g.prototype.categoriseDataSeries=function(){var t,e,i,a="";for(i=0;this.data.length>i;i++)if(a=this.data[i],a.dataPoints&&0!==a.dataPoints.length&&g._supportedChartTypes.indexOf(a.type)>=0){var n=!1,s=null,o=!1;for(t=0;this.plotInfo.plotTypes.length>t;t++)if(this.plotInfo.plotTypes[t].type===a.type){n=!0,e=this.plotInfo.plotTypes[t];break}for(n||(e={type:a.type,totalDataSeries:0,plotUnits:[]},this.plotInfo.plotTypes.push(e)),t=0;e.plotUnits.length>t;t++)if(e.plotUnits[t].axisYType===a.axisYType){o=!0,s=e.plotUnits[t];break}o||(s={type:a.type,previousDataSeriesCount:0,index:e.plotUnits.length,plotType:e,axisYType:a.axisYType,axisY:"primary"===a.axisYType?this.axisY:this.axisY2,axisX:this.axisX,dataSeriesIndexes:[]},e.plotUnits.push(s)),e.totalDataSeries++,s.dataSeriesIndexes.push(i)}for(i=0;this.plotInfo.plotTypes.length>i;i++){e=this.plotInfo.plotTypes[i];var r=0;for(t=0;e.plotUnits.length>t;t++)e.plotUnits[t].previousDataSeriesCount=r,r+=e.plotUnits[t].dataSeriesIndexes.length}},g.prototype.assignIdToDataPoints=function(){for(var t=0;this.data.length>t;t++)for(var e=this.data[t],i=e.dataPoints.length,a=0;i>a;a++)e.dataPointIds[a]=++this._eventManager.lastObjectId},g.prototype._processData=function(){this.assignIdToDataPoints(),this.categoriseDataSeries();for(var t=0;this.plotInfo.plotTypes.length>t;t++)for(var e=this.plotInfo.plotTypes[t],i=0;e.plotUnits.length>i;i++){var a=e.plotUnits[i];"line"===a.type||"stepLine"===a.type||"spline"===a.type||"column"===a.type||"area"===a.type||"splineArea"===a.type||"bar"===a.type||"bubble"===a.type||"scatter"===a.type?this._processMultiseriesPlotUnit(a):"stackedColumn"===a.type||"stackedBar"===a.type||"stackedArea"===a.type?this._processStackedPlotUnit(a):("stackedColumn100"===a.type||"stackedBar100"===a.type||"stackedArea100"===a.type)&&this._processStacked100PlotUnit(a)}},g.prototype._processMultiseriesPlotUnit=function(t){if(t.dataSeriesIndexes&&!(1>t.dataSeriesIndexes.length))for(var e,i,a,n,s=t.axisY.dataInfo,o=t.axisX.dataInfo,r=!1,h=0;t.dataSeriesIndexes.length>h;h++){var l=this.data[t.dataSeriesIndexes[h]],d=0,c=!1,x=!1;for(("normal"===l.axisPlacement||"xySwapped"===l.axisPlacement)&&(a=this.sessionVariables.axisX.internalMinimum?this.sessionVariables.axisX.internalMinimum:this._options.axisX&&this._options.axisX.minimum?this._options.axisX.minimum:-1/0,n=this.sessionVariables.axisX.internalMaximum?this.sessionVariables.axisX.internalMaximum:this._options.axisX&&this._options.axisX.maximum?this._options.axisX.maximum:1/0),(l.dataPoints[d].x&&l.dataPoints[d].x.getTime||"dateTime"===l.xValueType)&&(r=!0),d=0;l.dataPoints.length>d;d++){if(l.dataPoints[d].x===void 0&&(l.dataPoints[d].x=d),l.dataPoints[d].x.getTime?(r=!0,e=l.dataPoints[d].x.getTime()):e=l.dataPoints[d].x,i=l.dataPoints[d].y,o.min>e&&(o.min=e),e>o.max&&(o.max=e),s.min>i&&(s.min=i),i>s.max&&(s.max=i),d>0){var m=e-l.dataPoints[d-1].x;0>m&&(m=-1*m),o.minDiff>m&&0!==m&&(o.minDiff=m)}if(!(a>e)||c)if(!c&&(c=!0,d>0))d-=2;else{if(e>n&&!x)x=!0;else if(e>n&&x)continue;l.dataPoints[d].label&&(t.axisX.labels[e]=l.dataPoints[d].label),o.viewPortMin>e&&(o.viewPortMin=e),e>o.viewPortMax&&(o.viewPortMax=e),s.viewPortMin>i&&(s.viewPortMin=i),i>s.viewPortMax&&(s.viewPortMax=i)}}this.plotInfo.axisXValueType=l.xValueType=r?"dateTime":"number"}},g.prototype._processStackedPlotUnit=function(t){var e;if(t.dataSeriesIndexes&&!(1>t.dataSeriesIndexes.length)){var i,a,n,s,o,r,h=t.axisY.dataInfo,l=t.axisX.dataInfo,d=!1,c=[],x=[];for(o=0;t.dataSeriesIndexes.length>o;o++){var m=this.data[t.dataSeriesIndexes[o]],p=!1,u=!1;for(("normal"===m.axisPlacement||"xySwapped"===m.axisPlacement)&&(n=this.sessionVariables.axisX.internalMinimum?this.sessionVariables.axisX.internalMinimum:this._options.axisX&&this._options.axisX.minimum?this._options.axisX.minimum:-1/0,s=this.sessionVariables.axisX.internalMaximum?this.sessionVariables.axisX.internalMaximum:this._options.axisX&&this._options.axisX.maximum?this._options.axisX.maximum:1/0),(m.dataPoints[r].x&&m.dataPoints[r].x.getTime||"dateTime"===m.xValueType)&&(d=!0),r=0;m.dataPoints.length>r;r++){if(m.dataPoints[r].x===void 0&&(m.dataPoints[r].x=r),m.dataPoints[r].x.getTime?(d=!0,i=m.dataPoints[r].x.getTime()):i=m.dataPoints[r].x,a=m.dataPoints[r].y,l.min>i&&(l.min=i),i>l.max&&(l.max=i),r>0){var g=i-m.dataPoints[r-1].x;
0>g&&(g=-1*g),l.minDiff>g&&0!==g&&(l.minDiff=g)}if(!(n>i)||p)if(!p&&(p=!0,r>0))r-=2;else{if(i>s&&!u)u=!0;else if(i>s&&u)continue;m.dataPoints[r].label&&(t.axisX.labels[i]=m.dataPoints[r].label),l.viewPortMin>i&&(l.viewPortMin=i),i>l.viewPortMax&&(l.viewPortMax=i),a>=0?c[i]?c[i]+=a:c[i]=a:x[i]?x[i]+=a:x[i]=a}}this.plotInfo.axisXValueType=m.xValueType=d?"dateTime":"number"}for(r in c)isNaN(r)||(e=c[r],h.min>e&&(h.min=e),e>h.max&&(h.max=e),l.viewPortMin>r||r>l.viewPortMax||(h.viewPortMin>e&&(h.viewPortMin=e),e>h.viewPortMax&&(h.viewPortMax=e)));for(r in x)isNaN(r)||(e=x[r],h.min>e&&(h.min=e),e>h.max&&(h.max=e),l.viewPortMin>r||r>l.viewPortMax||(h.viewPortMin>e&&(h.viewPortMin=e),e>h.viewPortMax&&(h.viewPortMax=e)))}},g.prototype._processStacked100PlotUnit=function(t){var e,i;if(t.dataSeriesIndexes&&!(1>t.dataSeriesIndexes.length)){for(var a,n,s=t.axisY.dataInfo,o=t.axisX.dataInfo,r=!1,h=!1,l=!1,d=[],c=0;t.dataSeriesIndexes.length>c;c++){var x=this.data[t.dataSeriesIndexes[c]],m=0,p=!1,u=!1;for(("normal"===x.axisPlacement||"xySwapped"===x.axisPlacement)&&(e=this.sessionVariables.axisX.internalMinimum?this.sessionVariables.axisX.internalMinimum:this._options.axisX&&this._options.axisX.minimum?this._options.axisX.minimum:-1/0,i=this.sessionVariables.axisX.internalMaximum?this.sessionVariables.axisX.internalMaximum:this._options.axisX&&this._options.axisX.maximum?this._options.axisX.maximum:1/0),(x.dataPoints[m].x&&x.dataPoints[m].x.getTime||"dateTime"===x.xValueType)&&(r=!0),m=0;x.dataPoints.length>m;m++){if(x.dataPoints[m].x===void 0&&(x.dataPoints[m].x=m),x.dataPoints[m].x.getTime?(r=!0,a=x.dataPoints[m].x.getTime()):a=x.dataPoints[m].x,n=x.dataPoints[m].y,o.min>a&&(o.min=a),a>o.max&&(o.max=a),m>0){var g=a-x.dataPoints[m-1].x;0>g&&(g=-1*g),o.minDiff>g&&0!==g&&(o.minDiff=g)}if(!(e>a)||p)if(!p&&(p=!0,m>0))m-=2;else{if(a>i&&!u)u=!0;else if(a>i&&u)continue;x.dataPoints[m].label&&(t.axisX.labels[a]=x.dataPoints[m].label),o.viewPortMin>a&&(o.viewPortMin=a),a>o.viewPortMax&&(o.viewPortMax=a),n>=0?h=!0:l=!0,d[a]?d[a]+=Math.abs(n):d[a]=Math.abs(n)}}this.plotInfo.axisXValueType=x.xValueType=r?"dateTime":"number"}h&&!l?(s.max=99,s.min=1):h&&l?(s.max=99,s.min=-99):!h&&l&&(s.max=-1,s.min=-99),s.viewPortMin=s.min,s.viewPortMax=s.max,t.dataPointYSums=d}},g.prototype.getAutoFontSize=function(t){var e=t/400;return Math.min(this.canvas.width,this.canvas.height)*e},g.prototype.resetOverlayedCanvas=function(){var t=this.overlaidCanvas.width;this.overlaidCanvas.width=0,this.overlaidCanvas.width=t},g.prototype.attachEvent=function(t){this._events.push(t)},g.prototype._touchEventHandler=function(t){if(t.changedTouches){var e=[],i=t.changedTouches,a=i?i[0]:t;switch(t.type){case"touchstart":case"MSPointerDown":e=["mousemove","mousedown"];break;case"touchmove":case"MSPointerMove":e=["mousemove"];break;case"touchend":case"MSPointerUp":e="touchstart"===this._lastTouchEventType||"MSPointerDown"===this._lastTouchEventType?["mouseup","click"]:["mouseup"];break;default:return}this._lastTouchEventType=t.type;for(var n=0;e.length>n;n++){var s=e[n],o=document.createEvent("MouseEvent");o.initMouseEvent(s,!0,!0,window,1,a.screenX,a.screenY,a.clientX,a.clientY,!1,!1,!1,!1,0,null),a.target.dispatchEvent(o),t.preventManipulation&&t.preventManipulation(),t.preventDefault&&t.preventDefault()}}},g.prototype._mouseEventHandler=function(t){t.preventManipulation&&t.preventManipulation(),t.preventDefault&&t.preventDefault();var e,i,a=Y(t),n=t.type;if(t||(t=window.event),t.which?i=3==t.which:t.button&&(i=2==t.button),w&&window.console&&(window.console.log(n+" --> x: "+a.x+"; y:"+a.y),i&&window.console.log(t.which),"mouseup"===n&&window.console.log("mouseup")),!i){if(g.capturedEventParam)e=g.capturedEventParam,"mouseup"===n&&(g.capturedEventParam=null,e.chart.overlaidCanvas.releaseCapture?e.chart.overlaidCanvas.releaseCapture():document.body.removeEventListener("mouseup",e.chart._mouseEventHandler,!1)),e.hasOwnProperty(n)&&e[n].call(e.context,a.x,a.y);else if(this._events)for(var s=0;this._events.length>s;s++)if(this._events[s].hasOwnProperty(n)){e=this._events[s];var o=e.bounds;if(a.x>=o.x1&&o.x2>=a.x&&a.y>=o.y1&&o.y2>=a.y){e[n].call(e.context,a.x,a.y),"mousedown"===n&&e.capture===!0?(g.capturedEventParam=e,this.overlaidCanvas.setCapture?this.overlaidCanvas.setCapture():document.body.addEventListener("mouseup",this._mouseEventHandler,!1)):"mouseup"===n&&(e.chart.overlaidCanvas.releaseCapture?e.chart.overlaidCanvas.releaseCapture():document.body.removeEventListener("mouseup",this._mouseEventHandler,!1));break}e=null}if(this._toolTip&&this._toolTip.enabled){var r=this.getPlotArea();(r.x1>a.x||a.x>r.x2||r.y1>a.y||a.y>r.y2)&&this._toolTip.hide()}this.isDrag&&this.zoomEnabled||!this._eventManager||this._eventManager.mouseEventHandler(t)}},g.prototype._plotAreaMouseDown=function(t,e){this.isDrag=!0,this.dragStartPoint="none"!==this.plotInfo.axisPlacement?{x:t,y:e,xMinimum:this.axisX.minimum,xMaximum:this.axisX.maximum}:{x:t,y:e}},g.prototype._plotAreaMouseUp=function(t,e){var i,a,n;if(("normal"===this.plotInfo.axisPlacement||"xySwapped"===this.plotInfo.axisPlacement)&&this.isDrag){var s=0,o=0,r=this.axisX.lineCoordinates;if("xySwapped"===this.plotInfo.axisPlacement?(s=e-this.dragStartPoint.y,o=Math.abs(this.axisX.maximum-this.axisX.minimum)/r.height*s):(s=this.dragStartPoint.x-t,o=Math.abs(this.axisX.maximum-this.axisX.minimum)/r.width*s),Math.abs(s)>2){if(this.panEnabled){var h=!1,l=0;this.axisX._absoluteMinimum>this.axisX.sessionVariables.internalMinimum?(l=this.axisX._absoluteMinimum-this.axisX.sessionVariables.internalMinimum,this.axisX.sessionVariables.internalMinimum+=l,this.axisX.sessionVariables.internalMaximum+=l,h=!0):this.axisX.sessionVariables.internalMaximum>this.axisX._absoluteMaximum&&(l=this.axisX.sessionVariables.internalMaximum-this.axisX._absoluteMaximum,this.axisX.sessionVariables.internalMaximum-=l,this.axisX.sessionVariables.internalMinimum-=l,h=!0),this.overlaidCanvas.style.cursor=this._defaultCursor,h&&this.render()}else if(this.zoomEnabled){if(this.resetOverlayedCanvas(),!this.dragStartPoint)return;"xySwapped"===this.plotInfo.axisPlacement?(n={y1:Math.min(this.dragStartPoint.y,e),y2:Math.max(this.dragStartPoint.y,e)},Math.abs(n.y1-n.y2)>1&&(r=this.axisX.lineCoordinates,a=this.axisX.maximum-(this.axisX.maximum-this.axisX.minimum)/r.height*(n.y2-r.y1),i=this.axisX.maximum-(this.axisX.maximum-this.axisX.minimum)/r.height*(n.y1-r.y1),a=Math.max(a,this.axisX.dataInfo.min),i=Math.min(i,this.axisX.dataInfo.max),Math.abs((i-a)/this.axisX.dataInfo.minDiff)>=.008*this.canvas.height&&(this.axisX.sessionVariables.internalMinimum=a,this.axisX.sessionVariables.internalMaximum=i,this.render()))):"normal"===this.plotInfo.axisPlacement&&(n={x1:Math.min(this.dragStartPoint.x,t),x2:Math.max(this.dragStartPoint.x,t)},Math.abs(n.x1-n.x2)>1&&(r=this.axisX.lineCoordinates,a=(this.axisX.maximum-this.axisX.minimum)/r.width*(n.x1-r.x1)+this.axisX.minimum,i=(this.axisX.maximum-this.axisX.minimum)/r.width*(n.x2-r.x1)+this.axisX.minimum,a=Math.max(a,this.axisX.dataInfo.min),i=Math.min(i,this.axisX.dataInfo.max),Math.abs((i-a)/this.axisX.dataInfo.minDiff)>=.01*this.canvas.width&&(this.axisX.sessionVariables.internalMinimum=a,this.axisX.sessionVariables.internalMaximum=i,this.render())))}this.zoomEnabled&&"none"===this._toolBar.style.display&&(this._toolBar.style.display="inline",this._zoomButton.innerHTML=this._cultureInfo.panText,this._resetButton.innerHTML=this._cultureInfo.resetText)}}this.isDrag=!1},g.prototype._plotAreaMouseMove=function(t,e){if(this.isDrag&&"none"!==this.plotInfo.axisPlacement){var i=0,n=0,s=this.axisX.lineCoordinates;if("xySwapped"===this.plotInfo.axisPlacement?(i=e-this.dragStartPoint.y,n=Math.abs(this.axisX.maximum-this.axisX.minimum)/s.height*i):(i=this.dragStartPoint.x-t,n=Math.abs(this.axisX.maximum-this.axisX.minimum)/s.width*i),Math.abs(i)>2&&8>Math.abs(i)&&(this.panEnabled||this.zoomEnabled)?this._toolTip.hide():!this._toolTip.enabled||this.panEnabled||this.zoomEnabled||this._toolTip.mouseMoveHandler(t,e),Math.abs(i)>2&&(this.panEnabled||this.zoomEnabled))if(this.panEnabled){this.axisX.sessionVariables.internalMinimum=this.dragStartPoint.xMinimum+n,this.axisX.sessionVariables.internalMaximum=this.dragStartPoint.xMaximum+n;var o=0;this.axisX._absoluteMinimum-a(this.axisX.interval,this.axisX.intervalType)>this.axisX.sessionVariables.internalMinimum?(o=this.axisX._absoluteMinimum-a(this.axisX.interval,this.axisX.intervalType)-this.axisX.sessionVariables.internalMinimum,this.axisX.sessionVariables.internalMinimum+=o,this.axisX.sessionVariables.internalMaximum+=o):this.axisX.sessionVariables.internalMaximum>this.axisX._absoluteMaximum+a(this.axisX.interval,this.axisX.intervalType)&&(o=this.axisX.sessionVariables.internalMaximum-(this.axisX._absoluteMaximum+a(this.axisX.interval,this.axisX.intervalType)),this.axisX.sessionVariables.internalMaximum-=o,this.axisX.sessionVariables.internalMinimum-=o);var r=this;clearTimeout(this._panTimerId),this._panTimerId=setTimeout(function(){r.render()},0)}else if(this.zoomEnabled){var h=this.getPlotArea();this.resetOverlayedCanvas();var l=this.overlaidCanvasCtx.globalAlpha;this.overlaidCanvasCtx.globalAlpha=.7,this.overlaidCanvasCtx.fillStyle="#A0ABB8","xySwapped"===this.plotInfo.axisPlacement?this.overlaidCanvasCtx.fillRect(h.x1,this.dragStartPoint.y,h.x2-h.x1,e-this.dragStartPoint.y):"normal"===this.plotInfo.axisPlacement&&this.overlaidCanvasCtx.fillRect(this.dragStartPoint.x,h.y1,t-this.dragStartPoint.x,h.y2-h.y1),this.overlaidCanvasCtx.globalAlpha=l}}else this._toolTip.enabled&&this._toolTip.mouseMoveHandler(t,e)},g.prototype.getPlotArea=function(){var t,e,i,a,n=this.axisY?this.axisY:this.axisY2;return this.axisX&&n?(t=this.axisX.lineCoordinates.x2>this.axisX.lineCoordinates.x1?this.axisX.lineCoordinates.x1:n.lineCoordinates.x1,i=n.lineCoordinates.y1>this.axisX.lineCoordinates.y1?this.axisX.lineCoordinates.y1:n.lineCoordinates.y1,e=this.axisX.lineCoordinates.x2>n.lineCoordinates.x2?this.axisX.lineCoordinates.x2:n.lineCoordinates.x2,a=this.axisX.lineCoordinates.y2>this.axisX.lineCoordinates.y1?this.axisX.lineCoordinates.y2:n.lineCoordinates.y2,{x1:t,y1:i,x2:e,y2:a,width:e-t,height:a-i}):this.layoutManager.getFreeSpace()},g.prototype.getPixelCoordinatesOnPlotArea=function(t,e){return{x:this.axisX.getPixelCoordinatesOnAxis(t).x,y:this.axisY.getPixelCoordinatesOnAxis(e).y}},g.prototype.renderIndexLabels=function(){this.ctx.textBaseline="middle";for(var t=this.getPlotArea(),e=0;this._indexLabels.length>e;e++){var i,a,n,s=this._indexLabels[e];this.ctx.fillStyle=p("indexLabelFontColor",s.dataPoint,s.dataSeries),this.ctx.font=m("indexLabel",s.dataPoint,s.dataSeries);var o=this.replaceKeywordsWithValue(p("indexLabel",s.dataPoint,s.dataSeries),s.dataPoint,s.dataSeries),r={width:this.ctx.measureText(o).width,height:p("indexLabelFontSize",s.dataPoint,s.dataSeries)},h=p("indexLabelPlacement",s.dataPoint,s.dataSeries),l=p("indexLabelOrientation",s.dataPoint,s.dataSeries);n=0;var d=0,c=0,x=0,u=0;t.x1>s.point.x||s.point.x>t.x2||t.y1>s.point.y||s.point.y>t.y2||("column"===s.chartType||"stackedColumn"===s.chartType||"stackedColumn100"===s.chartType||"bar"===s.chartType||"stackedBar"===s.chartType||"stackedBar100"===s.chartType?"normal"===this.plotInfo.axisPlacement?("outside"===h?(d=t.y1,c=t.y2):"inside"===h&&(d=s.bounds.y1,c=s.bounds.y2),"horizontal"===l?(i=s.point.x-r.width/2,a=s.dataPoint.y>=0?Math.min(Math.max(s.point.y-r.height/2-5,d+r.height/2+5),c-r.height/2-5):Math.max(Math.min(s.point.y+r.height/2+5,c-r.height/2),d+r.height/2+5)):"vertical"===l&&(i=s.point.x,a=s.dataPoint.y>=0?Math.min(Math.max(s.point.y-5,d+r.width+5),c):Math.max(Math.min(s.point.y+r.width+5,c-5),d),n=-90)):"xySwapped"===this.plotInfo.axisPlacement&&("outside"===h?(x=t.x1,u=t.x2):"inside"===h&&(x=s.bounds.x1,u=s.bounds.x2),"horizontal"===l?(a=s.point.y,i=s.dataPoint.y>=0?Math.max(Math.min(s.point.x+5,u-r.width),x):Math.min(Math.max(s.point.x-r.width-5,x),u)):"vertical"===l&&(a=s.point.y+r.width/2,i=s.dataPoint.y>=0?Math.max(Math.min(s.point.x+r.height/2+5,u-r.height/2),x):Math.min(Math.max(s.point.x-r.height/2-5,x+r.height/2),u+r.height/2),n=-90)):"horizontal"===l?(i=s.point.x-r.width/2,a=s.dataPoint.y>=0?Math.max(s.point.y-r.height/2-5,t.y1+r.height/2):Math.min(s.point.y+r.height/2+5,t.y2-r.height/2)):"vertical"===l&&(i=s.point.x,a=s.dataPoint.y>=0?Math.max(s.point.y-5,t.y1+r.width):Math.min(s.point.y+r.width+5,t.y2),n=-90),this.ctx.save(),this.ctx.translate(i,a),this.ctx.rotate(Math.PI/180*n),this.ctx.fillText(o,0,0),this.ctx.restore())}},g.prototype.renderLine=function(t){var e=t.dataSeriesIndexes.length;if(!(0>=e)){var i=this._eventManager.ghostCtx;this.ctx.save();var a=this.getPlotArea();this.ctx.beginPath(),this.ctx.rect(a.x1,a.y1,a.width,a.height),this.ctx.clip();for(var n=[],s=0;t.dataSeriesIndexes.length>s;s++){var o=t.dataSeriesIndexes[s],r=this.data[o];this.ctx.lineWidth=r.lineThickness;var h=r.dataPoints,d=r.id;this._eventManager.objectMap[d]={objectType:"dataSeries",dataSeriesIndex:o};var c=l(d);i.strokeStyle=c,i.lineWidth=r.lineThickness>0?Math.max(r.lineThickness,4):0;var x=r._colorSet,m=x[0];this.ctx.strokeStyle=m;var p,u,g,v=!0,y=0;if(h.length>0){for(y=0;h.length>y;y++)if(g=h[y].getTime?h[y].x.getTime():h[y].x,!(t.axisX.dataInfo.viewPortMin>g||g>t.axisX.dataInfo.viewPortMax)&&"number"==typeof h[y].y){p=t.axisX.convertionParameters.reference+t.axisX.convertionParameters.pixelPerUnit*(g-t.axisX.convertionParameters.minimum)+.5<<0,u=t.axisY.convertionParameters.reference+t.axisY.convertionParameters.pixelPerUnit*(h[y].y-t.axisY.convertionParameters.minimum)+.5<<0;var f=r.dataPointIds[y];if(this._eventManager.objectMap[f]={objectType:"dataPoint",dataSeriesIndex:o,dataPointIndex:y,x1:p,y1:u},v?(this.ctx.beginPath(),this.ctx.moveTo(p,u),i.beginPath(),i.moveTo(p,u),v=!1):(this.ctx.lineTo(p,u),i.lineTo(p,u),0===y%500&&(this.ctx.stroke(),this.ctx.beginPath(),this.ctx.moveTo(p,u),i.stroke(),i.beginPath(),i.moveTo(p,u))),h[y].markerSize>0||r.markerSize>0){var b=r.getMarkerProperties(y,p,u,this.ctx);n.push(b);var P=l(f);n.push({x:p,y:u,ctx:i,type:b.type,size:b.size,color:P,borderColor:P,borderThickness:b.borderThickness})}(h[y].indexLabel||r.indexLabel)&&this._indexLabels.push({chartType:"line",dataPoint:h[y],dataSeries:r,point:{x:p,y:u},color:m})}this.ctx.stroke(),i.stroke()}}O.drawMarkers(n),this.ctx.restore(),this.ctx.beginPath(),i.beginPath()}},g.prototype.renderStepLine=function(t){var e=t.dataSeriesIndexes.length;if(!(0>=e)){var i=this._eventManager.ghostCtx;this.ctx.save();var a=this.getPlotArea();this.ctx.beginPath(),this.ctx.rect(a.x1,a.y1,a.width,a.height),this.ctx.clip();for(var n=[],s=0;t.dataSeriesIndexes.length>s;s++){var o=t.dataSeriesIndexes[s],r=this.data[o];this.ctx.lineWidth=r.lineThickness;var h=r.dataPoints,d=r.id;this._eventManager.objectMap[d]={objectType:"dataSeries",dataSeriesIndex:o};var c=l(d);i.strokeStyle=c,i.lineWidth=r.lineThickness>0?Math.max(r.lineThickness,4):0;var x=r._colorSet,m=x[0];this.ctx.strokeStyle=m;var p,u,g,v=!0,y=0;if(h.length>0){for(y=0;h.length>y;y++)if(g=h[y].getTime?h[y].x.getTime():h[y].x,!(t.axisX.dataInfo.viewPortMin>g||g>t.axisX.dataInfo.viewPortMax)&&"number"==typeof h[y].y){var f=u;p=t.axisX.convertionParameters.reference+t.axisX.convertionParameters.pixelPerUnit*(g-t.axisX.convertionParameters.minimum)+.5<<0,u=t.axisY.convertionParameters.reference+t.axisY.convertionParameters.pixelPerUnit*(h[y].y-t.axisY.convertionParameters.minimum)+.5<<0;var b=r.dataPointIds[y];if(this._eventManager.objectMap[b]={objectType:"dataPoint",dataSeriesIndex:o,dataPointIndex:y,x1:p,y1:u},v?(this.ctx.beginPath(),this.ctx.moveTo(p,u),i.beginPath(),i.moveTo(p,u),v=!1):(this.ctx.lineTo(p,f),i.lineTo(p,f),this.ctx.lineTo(p,u),i.lineTo(p,u),0===y%500&&(this.ctx.stroke(),this.ctx.beginPath(),this.ctx.moveTo(p,u),i.stroke(),i.beginPath(),i.moveTo(p,u))),h[y].markerSize>0||r.markerSize>0){var P=r.getMarkerProperties(y,p,u,this.ctx);n.push(P);var M=l(b);n.push({x:p,y:u,ctx:i,type:P.type,size:P.size,color:M,borderColor:M,borderThickness:P.borderThickness})}(h[y].indexLabel||r.indexLabel)&&this._indexLabels.push({chartType:"stepLine",dataPoint:h[y],dataSeries:r,point:{x:p,y:u},color:m})}this.ctx.stroke(),i.stroke()}}O.drawMarkers(n),this.ctx.restore(),this.ctx.beginPath(),i.beginPath()}},g.prototype.renderSpline=function(t){var e=t.dataSeriesIndexes.length;if(!(0>=e)){var i=this._eventManager.ghostCtx;this.ctx.save();var a=this.getPlotArea();this.ctx.beginPath(),this.ctx.rect(a.x1,a.y1,a.width,a.height),this.ctx.clip();for(var n=[],s=0;t.dataSeriesIndexes.length>s;s++){var o=t.dataSeriesIndexes[s],r=this.data[o];this.ctx.lineWidth=r.lineThickness;var h=r.dataPoints,d=r.id;this._eventManager.objectMap[d]={objectType:"dataSeries",dataSeriesIndex:o};var c=l(d);i.strokeStyle=c,i.lineWidth=r.lineThickness>0?Math.max(r.lineThickness,4):0;var x=r._colorSet,m=x[0];this.ctx.strokeStyle=m;var p,u,g,y=0,f=[];if(h.length>0)for(y=0;h.length>y;y++)if(g=h[y].getTime?h[y].x.getTime():h[y].x,!(t.axisX.dataInfo.viewPortMin>g||g>t.axisX.dataInfo.viewPortMax)&&"number"==typeof h[y].y){p=t.axisX.convertionParameters.reference+t.axisX.convertionParameters.pixelPerUnit*(g-t.axisX.convertionParameters.minimum)+.5<<0,u=t.axisY.convertionParameters.reference+t.axisY.convertionParameters.pixelPerUnit*(h[y].y-t.axisY.convertionParameters.minimum)+.5<<0;var b=r.dataPointIds[y];if(this._eventManager.objectMap[b]={objectType:"dataPoint",dataSeriesIndex:o,dataPointIndex:y,x1:p,y1:u},f[f.length]={x:p,y:u},h[y].markerSize>0||r.markerSize>0){var P=r.getMarkerProperties(y,p,u,this.ctx);n.push(P);var M=l(b);n.push({x:p,y:u,ctx:i,type:P.type,size:P.size,color:M,borderColor:M,borderThickness:P.borderThickness})}(h[y].indexLabel||r.indexLabel)&&this._indexLabels.push({chartType:"spline",dataPoint:h[y],dataSeries:r,point:{x:p,y:u},color:m})}var S=v(f,2);if(S.length>0){for(this.ctx.beginPath(),i.beginPath(),this.ctx.moveTo(S[0].x,S[0].y),i.moveTo(S[0].x,S[0].y),y=0;S.length-3>y;y+=3)this.ctx.bezierCurveTo(S[y+1].x,S[y+1].y,S[y+2].x,S[y+2].y,S[y+3].x,S[y+3].y),i.bezierCurveTo(S[y+1].x,S[y+1].y,S[y+2].x,S[y+2].y,S[y+3].x,S[y+3].y);this.ctx.stroke(),i.stroke()}}O.drawMarkers(n),this.ctx.restore(),this.ctx.beginPath(),i.beginPath()}};var D=function(t,e,i,a,n,s,o,r,h,l){var d,c=e,x=a,m=i,p=n,u=a-e>15&&n-i>15?8:.35*Math.min(a-e,n-i),g="rgba(255, 255, 255, .4)",v="rgba(255, 255, 255, 0.1)",y=s;t.beginPath(),t.moveTo(e,i),t.save(),t.fillStyle=y,t.fillRect(e,i,a-e,n-i),t.restore(),o===!0&&(t.save(),t.beginPath(),t.moveTo(e,i),t.lineTo(e+u,i+u),t.lineTo(a-u,i+u),t.lineTo(a,i),t.closePath(),d=t.createLinearGradient((a+e)/2,m+u,(a+e)/2,m),d.addColorStop(0,y),d.addColorStop(1,g),t.fillStyle=d,t.fill(),t.restore()),r===!0&&(t.save(),t.beginPath(),t.moveTo(e,n),t.lineTo(e+u,n-u),t.lineTo(a-u,n-u),t.lineTo(a,n),t.closePath(),d=t.createLinearGradient((a+e)/2,p-u,(a+e)/2,p),d.addColorStop(0,y),d.addColorStop(1,g),t.fillStyle=d,t.fill(),t.restore()),h===!0&&(t.save(),t.beginPath(),t.moveTo(e,i),t.lineTo(e+u,i+u),t.lineTo(e+u,n-u),t.lineTo(e,n),t.closePath(),d=t.createLinearGradient(c+u,(n+i)/2,c,(n+i)/2),d.addColorStop(0,y),d.addColorStop(1,v),t.fillStyle=d,t.fill(),t.restore()),l===!0&&(t.save(),t.beginPath(),t.moveTo(a,i),t.lineTo(a-u,i+u),t.lineTo(a-u,n-u),t.lineTo(a,n),d=t.createLinearGradient(x-u,(n+i)/2,x,(n+i)/2),d.addColorStop(0,y),d.addColorStop(1,v),t.fillStyle=d,d.addColorStop(0,y),d.addColorStop(1,v),t.fillStyle=d,t.fill(),t.closePath(),t.restore())};g.prototype.renderColumn=function(t){var e,i=t.dataSeriesIndexes.length;if(!(0>=i)){var a,n,s,o=null,r=this.getPlotArea(),h=0,d=t.axisY.convertionParameters.reference+t.axisY.convertionParameters.pixelPerUnit*(0-t.axisY.convertionParameters.minimum)<<0,c=.15*this.canvas.width,x=t.axisX.dataInfo.minDiff,m=.9*(r.width/Math.abs(t.axisX.maximum-t.axisX.minimum)*Math.abs(x)/t.plotType.totalDataSeries)<<0;this.ctx.save(),this._eventManager.ghostCtx.save(),this.ctx.beginPath(),this.ctx.rect(r.x1,r.y1,r.width,r.height),this.ctx.clip(),this._eventManager.ghostCtx.rect(r.x1,r.y1,r.width,r.height),this._eventManager.ghostCtx.clip();for(var p=0;t.dataSeriesIndexes.length>p;p++){var u=t.dataSeriesIndexes[p],g=this.data[u],v=g.dataPoints;if(1==v.length&&(m=c),1>m?m=1:m>c&&(m=c),v.length>0){var y=m>5&&g.bevelEnabled?!0:!1;for(h=0;v.length>h;h++)if(s=v[h].getTime?v[h].x.getTime():v[h].x,!(t.axisX.dataInfo.viewPortMin>s||s>t.axisX.dataInfo.viewPortMax)&&"number"==typeof v[h].y){a=t.axisX.convertionParameters.reference+t.axisX.convertionParameters.pixelPerUnit*(s-t.axisX.convertionParameters.minimum)+.5<<0,n=t.axisY.convertionParameters.reference+t.axisY.convertionParameters.pixelPerUnit*(v[h].y-t.axisY.convertionParameters.minimum)+.5<<0;var f,b,P=a-t.plotType.totalDataSeries*m/2+(t.previousDataSeriesCount+p)*m<<0,M=P+m<<0;v[h].y>=0?(f=n,b=d,f>b&&(e=f,f=b,b=f)):(b=n,f=d,f>b&&(e=f,f=b,b=f)),o=v[h].color?v[h].color:g._colorSet[h%g._colorSet.length],D(this.ctx,P,f,M,b,o,y&&v[h].y>=0,0>v[h].y&&y,!1,!1);var S=g.dataPointIds[h];this._eventManager.objectMap[S]={objectType:"dataPoint",dataSeriesIndex:u,dataPointIndex:h,x1:P,y1:f,x2:M,y2:b},o=l(S),D(this._eventManager.ghostCtx,P,f,M,b,o,!1,!1,!1,!1),(v[h].indexLabel||g.indexLabel)&&this._indexLabels.push({chartType:"column",dataPoint:v[h],dataSeries:g,point:{x:P+(M-P)/2,y:v[h].y>=0?f:b},bounds:{x1:P,y1:Math.min(f,b),x2:M,y2:Math.max(f,b)},color:o})}}}this.ctx.restore(),this._eventManager.ghostCtx.restore()}},g.prototype.renderStackedColumn=function(t){var e=t.dataSeriesIndexes.length;if(!(0>=e)){var i,a,n,s=null,o=this.getPlotArea(),r=[],h=[],d=0,c=t.axisY.convertionParameters.reference+t.axisY.convertionParameters.pixelPerUnit*(0-t.axisY.convertionParameters.minimum)<<0,x=.15*this.canvas.width,m=t.axisX.dataInfo.minDiff,p=.9*(o.width/Math.abs(t.axisX.maximum-t.axisX.minimum)*Math.abs(m)/t.plotType.plotUnits.length)<<0;this.ctx.save(),this._eventManager.ghostCtx.save(),this.ctx.beginPath(),this.ctx.rect(o.x1,o.y1,o.width,o.height),this.ctx.clip(),this._eventManager.ghostCtx.rect(o.x1,o.y1,o.width,o.height),this._eventManager.ghostCtx.clip();for(var u=0;t.dataSeriesIndexes.length>u;u++){var g=t.dataSeriesIndexes[u],v=this.data[g],y=v.dataPoints;if(1==y.length&&(p=x),1>p?p=1:p>x&&(p=x),y.length>0){var f=p>5&&v.bevelEnabled?!0:!1;for(this.ctx.strokeStyle="#4572A7 ",d=0;y.length>d;d++)if(n=y[d].x.getTime?y[d].x.getTime():y[d].x,!(t.axisX.dataInfo.viewPortMin>n||n>t.axisX.dataInfo.viewPortMax)&&"number"==typeof y[d].y){i=t.axisX.convertionParameters.reference+t.axisX.convertionParameters.pixelPerUnit*(n-t.axisX.convertionParameters.minimum)+.5<<0,a=t.axisY.convertionParameters.reference+t.axisY.convertionParameters.pixelPerUnit*(y[d].y-t.axisY.convertionParameters.minimum)+.5<<0;var b,P,M,S=i-t.plotType.plotUnits.length*p/2+t.index*p<<0,T=S+p<<0;y[d].y>=0?(M=r[n]?r[n]:0,b=a-M,P=c-M,r[n]=M+(P-b)):(M=h[n]?h[n]:0,P=a+M,b=c+M,h[n]=M+(P-b)),s=y[d].color?y[d].color:v._colorSet[d%v._colorSet.length],D(this.ctx,S,b,T,P,s,f&&y[d].y>=0,0>y[d].y&&f,!1,!1);var C=v.dataPointIds[d];this._eventManager.objectMap[C]={objectType:"dataPoint",dataSeriesIndex:g,dataPointIndex:d,x1:S,y1:b,x2:T,y2:P},s=l(C),D(this._eventManager.ghostCtx,S,b,T,P,s,!1,!1,!1,!1),(y[d].indexLabel||v.indexLabel)&&this._indexLabels.push({chartType:"stackedColumn",dataPoint:y[d],dataSeries:v,point:{x:i,y:y[d].y>=0?b:P},bounds:{x1:S,y1:Math.min(b,P),x2:T,y2:Math.max(b,P)},color:s})}}}this.ctx.restore(),this._eventManager.ghostCtx.restore()}},g.prototype.renderStackedColumn100=function(t){var e=t.dataSeriesIndexes.length;if(!(0>=e)){var i,a,n,s=null,o=this.getPlotArea(),r=[],h=[],d=0,c=t.axisY.convertionParameters.reference+t.axisY.convertionParameters.pixelPerUnit*(0-t.axisY.convertionParameters.minimum)<<0,x=.15*this.canvas.width,m=t.axisX.dataInfo.minDiff,p=.9*(o.width/Math.abs(t.axisX.maximum-t.axisX.minimum)*Math.abs(m)/t.plotType.plotUnits.length)<<0;this.ctx.save(),this._eventManager.ghostCtx.save(),this.ctx.beginPath(),this.ctx.rect(o.x1,o.y1,o.width,o.height),this.ctx.clip(),this._eventManager.ghostCtx.rect(o.x1,o.y1,o.width,o.height),this._eventManager.ghostCtx.clip();for(var u=0;t.dataSeriesIndexes.length>u;u++){var g=t.dataSeriesIndexes[u],v=this.data[g],y=v.dataPoints;if(1==y.length&&(p=x),1>p?p=1:p>x&&(p=x),y.length>0){var f=p>5&&v.bevelEnabled?!0:!1;for(d=0;y.length>d;d++)if(n=y[d].x.getTime?y[d].x.getTime():y[d].x,!(t.axisX.dataInfo.viewPortMin>n||n>t.axisX.dataInfo.viewPortMax)&&"number"==typeof y[d].y){i=t.axisX.convertionParameters.reference+t.axisX.convertionParameters.pixelPerUnit*(n-t.axisX.convertionParameters.minimum)+.5<<0;var b;b=0!==t.dataPointYSums[n]?100*(y[d].y/t.dataPointYSums[n]):0,a=t.axisY.convertionParameters.reference+t.axisY.convertionParameters.pixelPerUnit*(b-t.axisY.convertionParameters.minimum)+.5<<0;var P,M,S,T=i-t.plotType.plotUnits.length*p/2+t.index*p<<0,C=T+p<<0;y[d].y>=0?(S=r[n]?r[n]:0,P=a-S,M=c-S,r[n]=S+(M-P)):(S=h[n]?h[n]:0,M=a+S,P=c+S,h[n]=S+(M-P)),s=y[d].color?y[d].color:v._colorSet[d%v._colorSet.length],D(this.ctx,T,P,C,M,s,f&&y[d].y>=0,0>y[d].y&&f,!1,!1);var _=v.dataPointIds[d];this._eventManager.objectMap[_]={objectType:"dataPoint",dataSeriesIndex:g,dataPointIndex:d,x1:T,y1:P,x2:C,y2:M},s=l(_),D(this._eventManager.ghostCtx,T,P,C,M,s,!1,!1,!1,!1),(y[d].indexLabel||v.indexLabel)&&this._indexLabels.push({chartType:"stackedColumn100",dataPoint:y[d],dataSeries:v,point:{x:i,y:y[d].y>=0?P:M},bounds:{x1:T,y1:Math.min(P,M),x2:C,y2:Math.max(P,M)},color:s})}}}this.ctx.restore(),this._eventManager.ghostCtx.restore()}},g.prototype.renderBar=function(t){var e=t.dataSeriesIndexes.length;if(!(0>=e)){var i,a,n,s=null,o=this.getPlotArea(),r=0,h=t.axisY.convertionParameters.reference+t.axisY.convertionParameters.pixelPerUnit*(0-t.axisY.convertionParameters.minimum)<<0,d=.15*this.canvas.height,c=t.axisX.dataInfo.minDiff,x=.9*(o.height/Math.abs(t.axisX.maximum-t.axisX.minimum)*Math.abs(c)/t.plotType.totalDataSeries)<<0;this.ctx.save(),this._eventManager.ghostCtx.save(),this.ctx.beginPath(),this.ctx.rect(o.x1,o.y1,o.width,o.height),this.ctx.clip(),this._eventManager.ghostCtx.rect(o.x1,o.y1,o.width,o.height),this._eventManager.ghostCtx.clip();for(var m=0;t.dataSeriesIndexes.length>m;m++){var p=t.dataSeriesIndexes[m],u=this.data[p],g=u.dataPoints;if(1==g.length&&(x=d),1>x?x=1:x>d&&(x=d),g.length>0){var v=x>5&&u.bevelEnabled?!0:!1;for(this.ctx.strokeStyle="#4572A7 ",r=0;g.length>r;r++)if(n=g[r].getTime?g[r].x.getTime():g[r].x,!(t.axisX.dataInfo.viewPortMin>n||n>t.axisX.dataInfo.viewPortMax)&&"number"==typeof g[r].y){a=t.axisX.convertionParameters.reference+t.axisX.convertionParameters.pixelPerUnit*(n-t.axisX.convertionParameters.minimum)+.5<<0,i=t.axisY.convertionParameters.reference+t.axisY.convertionParameters.pixelPerUnit*(g[r].y-t.axisY.convertionParameters.minimum)+.5<<0;var y,f,b=a-t.plotType.totalDataSeries*x/2+(t.previousDataSeriesCount+m)*x<<0,P=b+x<<0;g[r].y>=0?(y=h,f=i):(y=i,f=h),s=g[r].color?g[r].color:u._colorSet[r%u._colorSet.length],D(this.ctx,y,b,f,P,s,v,!1,!1,!1);var M=u.dataPointIds[r];this._eventManager.objectMap[M]={objectType:"dataPoint",dataSeriesIndex:p,dataPointIndex:r,x1:y,y1:b,x2:f,y2:P},s=l(M),D(this._eventManager.ghostCtx,y,b,f,P,s,!1,!1,!1,!1),this._indexLabels.push({chartType:"bar",dataPoint:g[r],dataSeries:u,point:{x:g[r].y>=0?f:y,y:b+(P-b)/2},bounds:{x1:Math.min(y,f),y1:b,x2:Math.max(y,f),y2:P},color:s})}}}this.ctx.restore(),this._eventManager.ghostCtx.restore()}},g.prototype.renderStackedBar=function(t){var e=t.dataSeriesIndexes.length;if(!(0>=e)){var i,a,n,s=null,o=this.getPlotArea(),r=[],h=[],d=0,c=t.axisY.convertionParameters.reference+t.axisY.convertionParameters.pixelPerUnit*(0-t.axisY.convertionParameters.minimum)<<0,x=.15*this.canvas.width,m=t.axisX.dataInfo.minDiff,p=.9*(o.height/Math.abs(t.axisX.maximum-t.axisX.minimum)*Math.abs(m)/t.plotType.plotUnits.length)<<0;this.ctx.save(),this._eventManager.ghostCtx.save(),this.ctx.beginPath(),this.ctx.rect(o.x1,o.y1,o.width,o.height),this.ctx.clip(),this._eventManager.ghostCtx.rect(o.x1,o.y1,o.width,o.height),this._eventManager.ghostCtx.clip();for(var u=0;t.dataSeriesIndexes.length>u;u++){var g=t.dataSeriesIndexes[u],v=this.data[g],y=v.dataPoints;if(1==y.length&&(p=x),1>p?p=1:p>x&&(p=x),y.length>0){var f=p>5&&v.bevelEnabled?!0:!1;for(this.ctx.strokeStyle="#4572A7 ",d=0;y.length>d;d++)if(n=y[d].x.getTime?y[d].x.getTime():y[d].x,!(t.axisX.dataInfo.viewPortMin>n||n>t.axisX.dataInfo.viewPortMax)&&"number"==typeof y[d].y){a=t.axisX.convertionParameters.reference+t.axisX.convertionParameters.pixelPerUnit*(n-t.axisX.convertionParameters.minimum)+.5<<0,i=t.axisY.convertionParameters.reference+t.axisY.convertionParameters.pixelPerUnit*(y[d].y-t.axisY.convertionParameters.minimum)+.5<<0;var b,P,M,S=a-t.plotType.plotUnits.length*p/2+t.index*p<<0,T=S+p<<0;y[d].y>=0?(M=r[n]?r[n]:0,b=c+M,P=i+M,r[n]=M+(P-b)):(M=h[n]?h[n]:0,b=i-M,P=c-M,h[n]=M+(P-b)),s=y[d].color?y[d].color:v._colorSet[d%v._colorSet.length],D(this.ctx,b,S,P,T,s,f,!1,!1,!1);var C=v.dataPointIds[d];this._eventManager.objectMap[C]={objectType:"dataPoint",dataSeriesIndex:g,dataPointIndex:d,x1:b,y1:S,x2:P,y2:T},s=l(C),D(this._eventManager.ghostCtx,b,S,P,T,s,!1,!1,!1,!1),this._indexLabels.push({chartType:"stackedBar",dataPoint:y[d],dataSeries:v,point:{x:y[d].y>=0?P:b,y:a},bounds:{x1:Math.min(b,P),y1:S,x2:Math.max(b,P),y2:T},color:s})}}}this.ctx.restore(),this._eventManager.ghostCtx.restore()}},g.prototype.renderStackedBar100=function(t){var e=t.dataSeriesIndexes.length;if(!(0>=e)){var i,a,n,s=null,o=this.getPlotArea(),r=[],h=[],d=0,c=t.axisY.convertionParameters.reference+t.axisY.convertionParameters.pixelPerUnit*(0-t.axisY.convertionParameters.minimum)<<0,x=.15*this.canvas.width,m=t.axisX.dataInfo.minDiff,p=.9*(o.height/Math.abs(t.axisX.maximum-t.axisX.minimum)*Math.abs(m)/t.plotType.plotUnits.length)<<0;this.ctx.save(),this._eventManager.ghostCtx.save(),this.ctx.beginPath(),this.ctx.rect(o.x1,o.y1,o.width,o.height),this.ctx.clip(),this._eventManager.ghostCtx.rect(o.x1,o.y1,o.width,o.height),this._eventManager.ghostCtx.clip();for(var u=0;t.dataSeriesIndexes.length>u;u++){var g=t.dataSeriesIndexes[u],v=this.data[g],y=v.dataPoints;if(1==y.length&&(p=x),1>p?p=1:p>x&&(p=x),y.length>0){var f=p>5&&v.bevelEnabled?!0:!1;for(this.ctx.strokeStyle="#4572A7 ",d=0;y.length>d;d++)if(n=y[d].x.getTime?y[d].x.getTime():y[d].x,!(t.axisX.dataInfo.viewPortMin>n||n>t.axisX.dataInfo.viewPortMax)&&"number"==typeof y[d].y){a=t.axisX.convertionParameters.reference+t.axisX.convertionParameters.pixelPerUnit*(n-t.axisX.convertionParameters.minimum)+.5<<0;var b;b=0!==t.dataPointYSums[n]?100*(y[d].y/t.dataPointYSums[n]):0,i=t.axisY.convertionParameters.reference+t.axisY.convertionParameters.pixelPerUnit*(b-t.axisY.convertionParameters.minimum)+.5<<0;var P,M,S,T=a-t.plotType.plotUnits.length*p/2+t.index*p<<0,C=T+p<<0;y[d].y>=0?(S=r[n]?r[n]:0,P=c+S,M=i+S,r[n]=S+(M-P)):(S=h[n]?h[n]:0,P=i-S,M=c-S,h[n]=S+(M-P)),s=y[d].color?y[d].color:v._colorSet[d%v._colorSet.length],D(this.ctx,P,T,M,C,s,f,!1,!1,!1);var _=v.dataPointIds[d];this._eventManager.objectMap[_]={objectType:"dataPoint",dataSeriesIndex:g,dataPointIndex:d,x1:P,y1:T,x2:M,y2:C},s=l(_),D(this._eventManager.ghostCtx,P,T,M,C,s,!1,!1,!1,!1),this._indexLabels.push({chartType:"stackedBar100",dataPoint:y[d],dataSeries:v,point:{x:y[d].y>=0?M:P,y:a},bounds:{x1:Math.min(P,M),y1:T,x2:Math.max(P,M),y2:C},color:s})}}}this.ctx.restore(),this._eventManager.ghostCtx.restore()}},g.prototype.renderArea=function(t){var e=t.dataSeriesIndexes.length;if(!(0>=e)){var i=this._eventManager.ghostCtx,a=t.axisX.lineCoordinates,n=t.axisY.lineCoordinates,s=[],o=this.getPlotArea();this.ctx.save(),i.save(),this.ctx.beginPath(),this.ctx.rect(o.x1,o.y1,o.width,o.height),this.ctx.clip(),i.beginPath(),i.rect(o.x1,o.y1,o.width,o.height),i.clip();for(var r=0;t.dataSeriesIndexes.length>r;r++){var h=t.dataSeriesIndexes[r],d=this.data[h],c=d.dataPoints,x=d.id;this._eventManager.objectMap[x]={objectType:"dataSeries",dataSeriesIndex:h};var m=l(x);i.fillStyle=m,s=[];var p,u,g,v,y=!0,f=0,b=t.axisY.convertionParameters.reference+t.axisY.convertionParameters.pixelPerUnit*(0-t.axisY.convertionParameters.minimum)+.5<<0,P=null;
if(c.length>0){var M=d._colorSet[f%d._colorSet.length];for(this.ctx.fillStyle=M;c.length>f;f++)if(g=c[f].x.getTime?c[f].x.getTime():c[f].x,!(t.axisX.dataInfo.viewPortMin>g||g>t.axisX.dataInfo.viewPortMax)&&(p=t.axisX.convertionParameters.reference+t.axisX.convertionParameters.pixelPerUnit*(g-t.axisX.convertionParameters.minimum)+.5<<0,u=t.axisY.convertionParameters.reference+t.axisY.convertionParameters.pixelPerUnit*(c[f].y-t.axisY.convertionParameters.minimum)+.5<<0,"number"==typeof c[f].y)){y?(this.ctx.beginPath(),this.ctx.moveTo(p,u),P={x:p,y:u},i.beginPath(),i.moveTo(p,u),y=!1):(this.ctx.lineTo(p,u),i.lineTo(p,u),0===f%250&&(0>=t.axisY.minimum&&t.axisY.maximum>=0?v=b:0>t.axisY.maximum?v=n.y1:t.axisY.minimum>0&&(v=a.y2),this.ctx.lineTo(p,v),this.ctx.lineTo(P.x,v),this.ctx.closePath(),this.ctx.fill(),this.ctx.beginPath(),this.ctx.moveTo(p,u),i.lineTo(p,v),i.lineTo(P.x,v),i.closePath(),i.fill(),i.beginPath(),i.moveTo(p,u),P={x:p,y:u}));var S=d.dataPointIds[f];if(this._eventManager.objectMap[S]={objectType:"dataPoint",dataSeriesIndex:h,dataPointIndex:f,x1:p,y1:u},0!==c[f].markerSize&&(c[f].markerSize>0||d.markerSize>0)){var T=d.getMarkerProperties(f,p,u,this.ctx);s.push(T);var C=l(S);s.push({x:p,y:u,ctx:i,type:T.type,size:T.size,color:C,borderColor:C,borderThickness:T.borderThickness})}(c[f].indexLabel||d.indexLabel)&&this._indexLabels.push({chartType:"area",dataPoint:c[f],dataSeries:d,point:{x:p,y:u},color:M})}0>=t.axisY.minimum&&t.axisY.maximum>=0?v=b:0>t.axisY.maximum?v=n.y1:t.axisY.minimum>0&&(v=a.y2),this.ctx.lineTo(p,v),this.ctx.lineTo(P.x,v),this.ctx.closePath(),this.ctx.fill(),i.lineTo(p,v),i.lineTo(P.x,v),i.closePath(),i.fill(),P={x:p,y:u},O.drawMarkers(s)}}this.ctx.restore(),this._eventManager.ghostCtx.restore()}},g.prototype.renderSplineArea=function(t){var e=t.dataSeriesIndexes.length;if(!(0>=e)){var i=this._eventManager.ghostCtx,a=t.axisX.lineCoordinates,n=t.axisY.lineCoordinates,s=[],o=this.getPlotArea();this.ctx.save(),i.save(),this.ctx.beginPath(),this.ctx.rect(o.x1,o.y1,o.width,o.height),this.ctx.clip(),i.beginPath(),i.rect(o.x1,o.y1,o.width,o.height),i.clip();for(var r=0;t.dataSeriesIndexes.length>r;r++){var h=t.dataSeriesIndexes[r],d=this.data[h],c=d.dataPoints,x=d.id;this._eventManager.objectMap[x]={objectType:"dataSeries",dataSeriesIndex:h};var m=l(x);i.fillStyle=m,s=[];var p,u,g,y,f=0,b=t.axisY.convertionParameters.reference+t.axisY.convertionParameters.pixelPerUnit*(0-t.axisY.convertionParameters.minimum)+.5<<0,P=null,M=[];if(c.length>0){var S=d._colorSet[f%d._colorSet.length];for(this.ctx.fillStyle=S;c.length>f;f++)if(g=c[f].x.getTime?c[f].x.getTime():c[f].x,!(t.axisX.dataInfo.viewPortMin>g||g>t.axisX.dataInfo.viewPortMax)&&(p=t.axisX.convertionParameters.reference+t.axisX.convertionParameters.pixelPerUnit*(g-t.axisX.convertionParameters.minimum)+.5<<0,u=t.axisY.convertionParameters.reference+t.axisY.convertionParameters.pixelPerUnit*(c[f].y-t.axisY.convertionParameters.minimum)+.5<<0,"number"==typeof c[f].y)){var T=d.dataPointIds[f];if(this._eventManager.objectMap[T]={objectType:"dataPoint",dataSeriesIndex:h,dataPointIndex:f,x1:p,y1:u},M[M.length]={x:p,y:u},0!==c[f].markerSize&&(c[f].markerSize>0||d.markerSize>0)){var C=d.getMarkerProperties(f,p,u,this.ctx);s.push(C);var _=l(T);s.push({x:p,y:u,ctx:i,type:C.type,size:C.size,color:_,borderColor:_,borderThickness:C.borderThickness})}(c[f].indexLabel||d.indexLabel)&&this._indexLabels.push({chartType:"splineArea",dataPoint:c[f],dataSeries:d,point:{x:p,y:u},color:S})}var k=v(M,2);if(k.length>0){for(this.ctx.beginPath(),i.beginPath(),this.ctx.moveTo(k[0].x,k[0].y),i.moveTo(k[0].x,k[0].y),f=0;k.length-3>f;f+=3)this.ctx.bezierCurveTo(k[f+1].x,k[f+1].y,k[f+2].x,k[f+2].y,k[f+3].x,k[f+3].y),i.bezierCurveTo(k[f+1].x,k[f+1].y,k[f+2].x,k[f+2].y,k[f+3].x,k[f+3].y);0>=t.axisY.minimum&&t.axisY.maximum>=0?y=b:0>t.axisY.maximum?y=n.y1:t.axisY.minimum>0&&(y=a.y2),P={x:k[0].x,y:k[0].y},this.ctx.lineTo(k[k.length-1].x,y),this.ctx.lineTo(P.x,y),this.ctx.closePath(),this.ctx.fill(),i.lineTo(k[k.length-1].x,y),i.lineTo(P.x,y),i.closePath(),i.fill()}O.drawMarkers(s)}}this.ctx.restore(),this._eventManager.ghostCtx.restore()}},g.prototype.renderStackedArea=function(t){var e,i,a,n,s,o=t.dataSeriesIndexes.length;if(!(0>=o)){var h,d,c,x=null,m=[],p=this.getPlotArea(),u=[],g=[],v=0,y=t.axisY.convertionParameters.reference+t.axisY.convertionParameters.pixelPerUnit*(0-t.axisY.convertionParameters.minimum)<<0,f=this._eventManager.ghostCtx;f.beginPath(),this.ctx.save(),f.save(),this.ctx.beginPath(),this.ctx.rect(p.x1,p.y1,p.width,p.height),this.ctx.clip(),f.beginPath(),f.rect(p.x1,p.y1,p.width,p.height),f.clip();for(var b=[],P=0;t.dataSeriesIndexes.length>P;P++){s=t.dataSeriesIndexes[P],n=this.data[s],a=n.dataPoints;var M;for(n.dataPointIndexes=[],v=0;a.length>v;v++)M=a[v].x.getTime?a[v].x.getTime():a[v].x,n.dataPointIndexes[M]=v,b[M]||(g.push(M),b[M]=!0);g.sort(r)}for(P=0;t.dataSeriesIndexes.length>P;P++){s=t.dataSeriesIndexes[P],n=this.data[s],a=n.dataPoints;var S=!0,T=[],C=n.id;this._eventManager.objectMap[C]={objectType:"dataSeries",dataSeriesIndex:s};var _=l(C);if(f.fillStyle=_,g.length>0){for(x=n._colorSet[0],this.ctx.fillStyle=x,v=0;g.length>v;v++){c=g[v];var k=null;if(k=n.dataPointIndexes[c]>=0?a[n.dataPointIndexes[c]]:{x:c,y:0},!(t.axisX.dataInfo.viewPortMin>c||c>t.axisX.dataInfo.viewPortMax)&&"number"==typeof k.y){h=t.axisX.convertionParameters.reference+t.axisX.convertionParameters.pixelPerUnit*(c-t.axisX.convertionParameters.minimum)+.5<<0,d=t.axisY.convertionParameters.reference+t.axisY.convertionParameters.pixelPerUnit*(k.y-t.axisY.convertionParameters.minimum)+.5<<0;var w=u[c]?u[c]:0;if(d-=w,T.push({x:h,y:y-w}),u[c]=y-d,S)this.ctx.beginPath(),this.ctx.moveTo(h,d),f.beginPath(),f.moveTo(h,d),S=!1;else if(this.ctx.lineTo(h,d),f.lineTo(h,d),0===v%250){for(;T.length>0;)e=T.pop(),this.ctx.lineTo(e.x,e.y),f.lineTo(e.x,e.y);this.ctx.closePath(),this.ctx.fill(),this.ctx.beginPath(),this.ctx.moveTo(h,d),f.closePath(),f.fill(),f.beginPath(),f.moveTo(h,d),T.push({x:h,y:y-w})}if(n.dataPointIndexes[c]>=0&&(i=n.dataPointIds[n.dataPointIndexes[c]],this._eventManager.objectMap[i]={objectType:"dataPoint",dataSeriesIndex:s,dataPointIndex:n.dataPointIndexes[c],x1:h,y1:d}),n.dataPointIndexes[c]>=0&&0!==k.markerSize&&(k.markerSize>0||n.markerSize>0)){var I=n.getMarkerProperties(v,h,d,this.ctx);m.push(I);var A=l(i);m.push({x:h,y:d,ctx:f,type:I.type,size:I.size,color:A,borderColor:A,borderThickness:I.borderThickness})}(k.indexLabel||n.indexLabel)&&this._indexLabels.push({chartType:"stackedArea",dataPoint:k,dataSeries:n,point:{x:h,y:d},color:x})}}for(;T.length>0;)e=T.pop(),this.ctx.lineTo(e.x,e.y),f.lineTo(e.x,e.y);this.ctx.closePath(),this.ctx.fill(),this.ctx.beginPath(),this.ctx.moveTo(h,d),f.closePath(),f.fill(),f.beginPath(),f.moveTo(h,d)}delete n.dataPointIndexes}O.drawMarkers(m),this.ctx.restore(),f.restore()}},g.prototype.renderStackedArea100=function(t){var e,i,a,n,s,o=t.dataSeriesIndexes.length;if(!(0>=o)){var h,d,c,x=null,m=this.getPlotArea(),p=[],u=[],g=[],v=0,y=t.axisY.convertionParameters.reference+t.axisY.convertionParameters.pixelPerUnit*(0-t.axisY.convertionParameters.minimum)<<0,f=.15*this.canvas.width,b=t.axisX.dataInfo.minDiff,P=.9*m.width/Math.abs(t.axisX.maximum-t.axisX.minimum)*Math.abs(b)<<0,M=this._eventManager.ghostCtx;this.ctx.save(),M.save(),this.ctx.beginPath(),this.ctx.rect(m.x1,m.y1,m.width,m.height),this.ctx.clip(),M.beginPath(),M.rect(m.x1,m.y1,m.width,m.height),this._eventManager.ghostCtx.clip();for(var S=[],T=0;t.dataSeriesIndexes.length>T;T++){s=t.dataSeriesIndexes[T],n=this.data[s],a=n.dataPoints;var C;for(n.dataPointIndexes=[],v=0;a.length>v;v++)C=a[v].x.getTime?a[v].x.getTime():a[v].x,n.dataPointIndexes[C]=v,S[C]||(g.push(C),S[C]=!0);g.sort(r)}for(T=0;t.dataSeriesIndexes.length>T;T++){s=t.dataSeriesIndexes[T],n=this.data[s],a=n.dataPoints;var _=!0,k=n.id;this._eventManager.objectMap[k]={objectType:"dataSeries",dataSeriesIndex:s};var w=l(k);M.fillStyle=w,1==a.length&&(P=f),1>P?P=1:P>f&&(P=f);var I=[];if(g.length>0){for(x=n._colorSet[v%n._colorSet.length],this.ctx.fillStyle=x,v=0;g.length>v;v++){c=g[v];var A=null;if(A=n.dataPointIndexes[c]>=0?a[n.dataPointIndexes[c]]:{x:c,y:0},!(t.axisX.dataInfo.viewPortMin>c||c>t.axisX.dataInfo.viewPortMax)&&"number"==typeof A.y){var X;X=0!==t.dataPointYSums[c]?100*(A.y/t.dataPointYSums[c]):0,h=t.axisX.convertionParameters.reference+t.axisX.convertionParameters.pixelPerUnit*(c-t.axisX.convertionParameters.minimum)+.5<<0,d=t.axisY.convertionParameters.reference+t.axisY.convertionParameters.pixelPerUnit*(X-t.axisY.convertionParameters.minimum)+.5<<0;var z=u[c]?u[c]:0;if(d-=z,I.push({x:h,y:y-z}),u[c]=y-d,_)this.ctx.beginPath(),this.ctx.moveTo(h,d),M.beginPath(),M.moveTo(h,d),_=!1;else if(this.ctx.lineTo(h,d),M.lineTo(h,d),0===v%250){for(;I.length>0;)i=I.pop(),this.ctx.lineTo(i.x,i.y),M.lineTo(i.x,i.y);this.ctx.closePath(),this.ctx.fill(),this.ctx.beginPath(),this.ctx.moveTo(h,d),M.closePath(),M.fill(),M.beginPath(),M.moveTo(h,d),I.push({x:h,y:y-z})}if(n.dataPointIndexes[c]>=0&&(e=n.dataPointIds[n.dataPointIndexes[c]],this._eventManager.objectMap[e]={objectType:"dataPoint",dataSeriesIndex:s,dataPointIndex:n.dataPointIndexes[c],x1:h,y1:d}),n.dataPointIndexes[c]>=0&&0!==A.markerSize&&(A.markerSize>0||n.markerSize>0)){var F=n.getMarkerProperties(v,h,d,this.ctx);p.push(F);var L=l(e);p.push({x:h,y:d,ctx:M,type:F.type,size:F.size,color:L,borderColor:L,borderThickness:F.borderThickness})}(A.indexLabel||n.indexLabel)&&this._indexLabels.push({chartType:"stackedArea100",dataPoint:A,dataSeries:n,point:{x:h,y:d},color:x})}}for(;I.length>0;)i=I.pop(),this.ctx.lineTo(i.x,i.y),M.lineTo(i.x,i.y);this.ctx.closePath(),this.ctx.fill(),this.ctx.beginPath(),this.ctx.moveTo(h,d),M.closePath(),M.fill(),M.beginPath(),M.moveTo(h,d)}delete n.dataPointIndexes}O.drawMarkers(p),this.ctx.restore(),M.restore()}},g.prototype.renderBubble=function(t){var e,i,a,n,s=t.dataSeriesIndexes.length;if(!(0>=s)){var o,r,h,d=this.getPlotArea(),c=0,x=.15*this.canvas.width,m=t.axisX.dataInfo.minDiff,p=.9*(d.width/Math.abs(t.axisX.maximum-t.axisX.minimum)*Math.abs(m)/s)<<0;this.ctx.save(),this._eventManager.ghostCtx.save(),this.ctx.beginPath(),this.ctx.rect(d.x1,d.y1,d.width,d.height),this.ctx.clip(),this._eventManager.ghostCtx.rect(d.x1,d.y1,d.width,d.height),this._eventManager.ghostCtx.clip();for(var u=-1/0,g=1/0,v=0;t.dataSeriesIndexes.length>v;v++)for(n=t.dataSeriesIndexes[v],a=this.data[n],i=a.dataPoints,e=0,c=0;i.length>c;c++)h=h=i[c].getTime?i[c].x.getTime():i[c].x,t.axisX.dataInfo.viewPortMin>h||h>t.axisX.dataInfo.viewPortMax||i[c].z!==void 0&&(e=i[c].z,e>u&&(u=e),g>e&&(g=e));var y=5*5*Math.PI,f=Math.max(Math.pow(.25*Math.min(d.height,d.width)/2,2)*Math.PI,y);for(v=0;t.dataSeriesIndexes.length>v;v++)if(n=t.dataSeriesIndexes[v],a=this.data[n],i=a.dataPoints,1==i.length&&(p=x),1>p?p=1:p>x&&(p=x),i.length>0)for(this.ctx.strokeStyle="#4572A7 ",c=0;i.length>c;c++)if(h=h=i[c].getTime?i[c].x.getTime():i[c].x,!(t.axisX.dataInfo.viewPortMin>h||h>t.axisX.dataInfo.viewPortMax)&&"number"==typeof i[c].y){o=t.axisX.convertionParameters.reference+t.axisX.convertionParameters.pixelPerUnit*(h-t.axisX.convertionParameters.minimum)+.5<<0,r=t.axisY.convertionParameters.reference+t.axisY.convertionParameters.pixelPerUnit*(i[c].y-t.axisY.convertionParameters.minimum)+.5<<0,e=i[c].z;var b=y+(f-y)/(u-g)*(e-g),P=Math.max(Math.sqrt(b/Math.PI)<<0,1),M=2*P,S=a.getMarkerProperties(c,this.ctx);S.size=M,O.drawMarker(o,r,this.ctx,S.type,S.size,S.color,S.borderColor,S.borderThickness);var T=a.dataPointIds[c];this._eventManager.objectMap[T]={objectType:"dataPoint",dataSeriesIndex:n,dataPointIndex:c,x1:o,y1:r,size:M};var C=l(T);O.drawMarker(o,r,this._eventManager.ghostCtx,S.type,S.size,C,C,S.borderThickness)}this.ctx.restore(),this._eventManager.ghostCtx.restore()}},g.prototype.renderScatter=function(t){var e=t.dataSeriesIndexes.length;if(!(0>=e)){var i,a,n,s=this.getPlotArea(),o=0,r=.15*this.canvas.width,h=t.axisX.dataInfo.minDiff,d=.9*(s.width/Math.abs(t.axisX.maximum-t.axisX.minimum)*Math.abs(h)/e)<<0;this.ctx.save(),this._eventManager.ghostCtx.save(),this.ctx.beginPath(),this.ctx.rect(s.x1,s.y1,s.width,s.height),this.ctx.clip(),this._eventManager.ghostCtx.rect(s.x1,s.y1,s.width,s.height),this._eventManager.ghostCtx.clip();for(var c=0;t.dataSeriesIndexes.length>c;c++){var x=t.dataSeriesIndexes[c],m=this.data[x],p=m.dataPoints;if(1==p.length&&(d=r),1>d?d=1:d>r&&(d=r),p.length>0){this.ctx.strokeStyle="#4572A7 ";var u=0,g=0;for(o=0;p.length>o;o++)if(n=n=p[o].getTime?p[o].x.getTime():p[o].x,!(t.axisX.dataInfo.viewPortMin>n||n>t.axisX.dataInfo.viewPortMax)&&"number"==typeof p[o].y){i=t.axisX.convertionParameters.reference+t.axisX.convertionParameters.pixelPerUnit*(n-t.axisX.convertionParameters.minimum)+.5<<0,a=t.axisY.convertionParameters.reference+t.axisY.convertionParameters.pixelPerUnit*(p[o].y-t.axisY.convertionParameters.minimum)+.5<<0;var v=m.getMarkerProperties(o,i,a,this.ctx);if(O.drawMarker(v.x,v.y,v.ctx,v.type,v.size,v.color,v.color,v.thickness),!(Math.min(v.size,5)>Math.sqrt((u-i)*(u-i)+(g-a)*(g-a)))){var y=m.dataPointIds[o];this._eventManager.objectMap[y]={objectType:"dataPoint",dataSeriesIndex:x,dataPointIndex:o,x1:i,y1:a};var f=l(y);O.drawMarker(v.x,v.y,this._eventManager.ghostCtx,v.type,v.size,f,f,v.borderThickness),u=i,g=a}}}}this.ctx.restore(),this._eventManager.ghostCtx.restore()}};var E=function(t,e,i,a,n,s,o){if(t.save(),"pie"===n)t.beginPath(),t.moveTo(e.x,e.y),t.arc(e.x,e.y,i,s,o,!1),t.fillStyle=a,t.strokeStyle="white",t.lineWidth=2,t.closePath(),t.stroke(),t.fill();else if("doughnut"===n){var r=.6;t.beginPath(),t.arc(e.x,e.y,i,s,o,!1),t.arc(e.x,e.y,r*i,o,s,!0),t.closePath(),t.fillStyle=a,t.strokeStyle="white",t.lineWidth=2,t.stroke(),t.fill()}t.restore()};g.prototype.renderPie=function(t){function e(){Z.ctx.save(),Z._eventManager.ghostCtx.save(),Z.ctx.translate(k.x,k.y),Z._eventManager.ghostCtx.translate(k.x,k.y),Z.ctx.clearRect(-_.width/2,-_.height/2,_.width,_.height);var t=Z.animationEnabled===!0?60:1;if(null!=Q&&t>=Q.frame){Q.isAnimating--;for(var a=g[0],s=Q.maxAngle+2*Math.PI/t,o=!1,r=0;C>r;r++){var h=d.dataPoints[r].exploded,l=d.dataPoints[r].color?d.dataPoints[r].color:d.color?d.color:I[r%I.length],m=a,p=m+2*Math.PI/f*Math.abs(d.dataPoints[r].y);a=p,p>s&&(p=s);var u=d.type;if("outside"===d.indexLabelPlacement){var v=Math.min(_.width,_.height),y=v/14;b=A>y?A-y:A-25}else"inside"===d.indexLabelPlacement&&(b=(1-x)*.5*Math.min(_.width,_.height));var P={x:0,y:0};o||E(Z.ctx,P,b,l,u,m,p);var M;M=d.dataPoints[r].exploded===!0?!0:!1;var S=d.dataPointIds[r];Z._eventManager.objectMap[S]={objectType:"dataPoint",dataSeriesIndex:0,dataPointIndex:r,center:{x:k.x,y:k.y},radius:b,color:l,startAngle:g[r],endAngle:g[r+1],currentlyExploded:M,userSetExploded:h,pastExploded:!1};var T=c(S);Z._eventManager.ghostCtx.save(),l="rgb("+T[0]+","+T[1]+","+T[2]+")",E(Z._eventManager.ghostCtx,P,b,l,u,g[r],g[r+1]),Z._eventManager.ghostCtx.restore(),p===s&&(o=!0)}Q.maxAngle=s,Q.frame++,t>=Q.frame?Z.requestAnimFrame.call(window,e):(n(0,t),Z.ctx.restore(),Z._eventManager.ghostCtx.restore(),setTimeout(function(){Q.frame=0,Q.isAnimating=20,i()},200))}Z.renderCount++,Z.ctx.restore(),Z._eventManager.ghostCtx.restore()}function i(){Z.ctx.save(),Z._eventManager.ghostCtx.save(),Z.ctx.translate(k.x,k.y),Z._eventManager.ghostCtx.translate(k.x,k.y);var t=20;if(null!==Q&&t>Q.frame){Q.isAnimating--,Z.ctx.fillStyle=Z.backgroundColor?Z.backgroundColor:"white",Z.ctx.clearRect(-_.width/2,-_.height/2,_.width,_.height);for(var e=0;C>e;e++){var a=d.dataPoints[e].color?d.dataPoints[e].color:d.color?d.color:I[e%I.length],s={x:0,y:0},o=b*x*Math.cos(v[e]),r=b*x*Math.sin(v[e]),h=d.type,l=d.dataPointIds[e],m=Z._eventManager.objectMap[l].currentlyExploded,p=Z._eventManager.objectMap[l].pastExploded;if(m===!0&&p===!1?(s.x=s.x+o/t*(Q.frame+1),s.y=s.y+r/t*(Q.frame+1),Q.frame+1===t&&(Z._eventManager.objectMap[l].pastExploded=!0)):m===!0&&p===!0&&(s.x=s.x+o,s.y=s.y+r),Z._eventManager.objectMap[l].center.x=s.x+k.x,Z._eventManager.objectMap[l].center.y=s.y+k.y,p!==m){var u={};u.dataSeries=d,u.dataPoint=d.dataPoints[e],u.index=e,Z._toolTip.highlightObjects([u])}if(E(Z.ctx,s,b,a,h,g[e],g[e+1]),Q.frame===t-1){l=d.dataPointIds[e];var y=c(l);Z._eventManager.ghostCtx.save(),a="rgb("+y[0]+","+y[1]+","+y[2]+")",E(Z._eventManager.ghostCtx,s,b,a,h,g[e],g[e+1]),Z._eventManager.ghostCtx.restore()}}Q.frame++,t>Q.frame&&Z.requestAnimFrame.call(window,i)}n(Q.frame,t),Z.ctx.restore(),Z._eventManager.ghostCtx.restore()}function a(){Z.ctx.save(),Z._eventManager.ghostCtx.save(),Z.ctx.translate(k.x,k.y),Z._eventManager.ghostCtx.translate(k.x,k.y);var t=20;if(null!==Q&&Q.frame>0){Q.isAnimating--,Z.ctx.clearRect(-_.width/2,-_.height/2,_.width,_.height);for(var e=0;C>e;e++){var i=d.dataPointIds[e],s=Z._eventManager.objectMap[i].currentlyExploded,o=Z._eventManager.objectMap[i].pastExploded,r=d.dataPoints[e].color?d.dataPoints[e].color:d.color?d.color:I[e%I.length],h={x:0,y:0},l=d.type;s=Z._eventManager.objectMap[i].currentlyExploded;var m=b*x*Math.cos(v[e]),p=b*x*Math.sin(v[e]);if(s===!1&&o===!0?(h.x=h.x+m/t*Q.frame,h.y=h.y+p/t*Q.frame,1===Q.frame&&(Z._eventManager.objectMap[i].pastExploded=!1)):s===!0&&o===!0&&(h.x=h.x+m,h.y=h.y+p),Z._eventManager.objectMap[i].center.x=h.x+k.x,Z._eventManager.objectMap[i].center.y=h.y+k.y,o!==s){var u={};u.dataSeries=d,u.dataPoint=d.dataPoints[e],u.index=e,Z._toolTip.highlightObjects([u])}if(E(Z.ctx,h,b,r,l,g[e],g[e+1]),1===Q.frame){i=d.dataPointIds[e];var y=c(i);Z._eventManager.ghostCtx.save(),r="rgb("+y[0]+","+y[1]+","+y[2]+")",E(Z._eventManager.ghostCtx,h,b,r,l,g[e],g[e+1]),Z._eventManager.ghostCtx.restore()}}Q.frame--,Q.frame>0&&Z.requestAnimFrame.call(window,a)}n(Q.frame,t),Z.ctx.restore(),Z._eventManager.ghostCtx.restore()}function n(t,e){for(var i=0;d.dataPoints.length>i;i++){var a=d.dataPointIds[i],n=Z._eventManager.objectMap[a].currentlyExploded,s=Z._eventManager.objectMap[a].pastExploded,o=d.indexLabelPlacement,r=d.dataPoints[i].indexLabelLineColor?d.dataPoints[i].indexLabelLineColor:d.indexLabelLineColor,h=d.dataPoints[i].indexLabelLineThickness?d.dataPoints[i].indexLabelLineThickness:d.indexLabelLineThickness,l=d.dataPoints[i].indexLabelFontColor?d.dataPoints[i].indexLabelFontColor:d.indexLabelFontColor,c=d.dataPoints[i].indexLabelFontStyle?d.dataPoints[i].indexLabelFontStyle:d.indexLabelFontStyle,x=d.dataPoints[i].indexLabelFontWeight?d.dataPoints[i].indexLabelFontWeight:d.indexLabelFontWeight,p=d.dataPoints[i].indexLabelFontSize?d.dataPoints[i].indexLabelFontSize:d.indexLabelFontSize,g=d.dataPoints[i].indexLabelFontFamily?d.dataPoints[i].indexLabelFontFamily:d.indexLabelFontFamily,f=d.dataPoints[i].indexLabelBackgroundColor?d.dataPoints[i].indexLabelBackgroundColor:d.indexLabelBackgroundColor?d.indexLabelBackgroundColor:null;m(Z.ctx,P[i],M[i],S[i],T[i],n,y[i],b,v[i],l,o,r,h,t,e,s,u[i],c,x,p,g,f,i)}}var s,o,r,h=t.dataSeriesIndexes.length;if(!(0>=h)){var l=t.dataSeriesIndexes[0],d=this.data[l],x=.07,m=function(t,e,i,a,n,s,o,r,h,l,d,c,m,p,g,v,y,f,b,P,M,S,T){t.save(),t.lineWidth=m,t.font=f+" "+b+" "+P+"px "+M;var C="left";if(0>e&&"outside"===d?C="right":e>=0&&"outside"===d?C="left":"inside"===d&&(C="center"),t.textAlign=C,t.textBaseline="middle",t.beginPath(),S){t.fillStyle=S;var _=5;"outside"===d?e>=0?t.fillRect(e-_/2,a-_/2,i-e+_,n-a+_):t.fillRect(e+_/2,a-_/2,i-e-_,n-a+_):"inside"===d&&(e>=0?t.fillRect(e-y/2-_/2,a-_/2,i-e+_,n-a+_):t.fillRect(e+y/2+_/2,a-_/2,i-e-_,n-a+_))}if(t.fillStyle=l,e>0?t.fillText(o,e,(a+n)/2):t.fillText(o,e,(a+n)/2),"outside"===d&&u[T]){var k=r*Math.cos(h),w=r*Math.sin(h);s===!0&&v!==!0?(k+=r*x*Math.cos(h)/g*p,w+=r*x*Math.sin(h)/g*p):s===!0&&v===!0?(k+=r*x*Math.cos(h),w+=r*x*Math.sin(h)):s!==!0&&v===!0&&(k+=r*x*Math.cos(h)/g*p,w+=r*x*Math.sin(h)/g*p),t.moveTo(k,w),e>0?(t.lineTo(e-10,(a+n)/2),t.lineTo(e-2,(a+n)/2)):0>e&&(t.lineTo(e+10,(a+n)/2),t.lineTo(e+2,(a+n)/2)),t.strokeStyle=c,t.stroke()}t.restore()},p=this.ctx,u=[],g=[],v=[],y=[],f=0,b=0,P=[],M=[],S=[],T=[],C=d.dataPoints.length,_=this.getPlotArea();_.width=_.x2-_.x1,_.height=_.y2-_.y1;var k={x:(_.x2+_.x1)/2,y:(_.y2+_.y1)/2},w="startAngle"in d?d.startAngle:0;w=(w%360+360)%360,w=w*Math.PI/180,g.push(w);for(var I=this._selectedColorSet,A=.5*Math.min(_.width,_.height),X=0;C>X;X++){var z=d.dataPoints[X].indexLabel?d.dataPoints[X].indexLabel:d.indexLabel?d.indexLabel:d.dataPoints[X].label?d.dataPoints[X].label:d.label?d.label:"";z=this.replaceKeywordsWithValue(z,d.dataPoints[X],d,X),y.push(z);var F=d.dataPoints[X].indexLabelFontStyle?d.dataPoints[X].indexLabelFontStyle:d.indexLabelFontStyle,L=d.dataPoints[X].indexLabelFontWeight?d.dataPoints[X].indexLabelFontWeight:d.indexLabelFontWeight,B=d.dataPoints[X].indexLabelFontSize?d.dataPoints[X].indexLabelFontSize:d.indexLabelFontSize,Y=d.dataPoints[X].indexLabelFontFamily?d.dataPoints[X].indexLabelFontFamily:d.indexLabelFontFamily;p.save(),p.font=F+" "+L+" "+B+"px "+Y;var D=p.measureText(y[X]).width;p.restore(),u.push(D),f+=Math.abs(d.dataPoints[X].y)}var O=0;for(X=0;C>X;X++){var W,j=Math.abs(d.dataPoints[X].y);W=2*Math.PI*(j/f),g.push(g[X]+W),W=W/2+g[X],v.push(W%(2*Math.PI)),O+=u[X]}0===O&&(d.indexLabelPlacement="inside");var V=0;if("inside"===d.indexLabelPlacement)for(A=.8*(1-x)*A,X=0;C>X;X++)r=A*Math.cos(v[X]),o=A*Math.sin(v[X]),P.push(r),r>0?M.push(P[X]+u[X]):M.push(P[X]-u[X]),S.push(o-d.indexLabelFontSize/2),T.push(o+d.indexLabelFontSize/2);else if("outside"===d.indexLabelPlacement)for(var H=0;3>H;H++){for(X=0;C>X;X++)r=A*Math.cos(v[X]),o=A*Math.sin(v[X]),P.push(r),r>0?M.push(P[X]+u[X]):M.push(P[X]-u[X]),S.push(o-d.indexLabelFontSize/2),T.push(o+d.indexLabelFontSize/2);for(X=0;C>X;X++)if(Math.PI/2>v[X]&&X>=1&&T[X-1]>S[X]&&(s=T[X-1]-S[X],S[X]+=s+2,T[X]+=s+2,20>C&&(S[X]+=3,T[X]+=3)),3*Math.PI/2>v[X]&&v[X]>=Math.PI&&T[X]>S[X-1]){var U=T[X]-S[X-1];S[X]-=U+2,T[X]-=U+2,20>C&&(S[X]-=3,T[X]-=3)}for(X=C;X>=0;X--){if(Math.PI>v[X]&&v[X]>=Math.PI/2&&T[X+1]>S[X]){var R=T[X+1]-S[X];S[X]+=R+2,T[X]+=R+2,20>C&&(S[X]+=3,T[X]+=3)}v[X]>=3*Math.PI/2&&T[X]>S[X+1]&&(s=T[X]-S[X+1],S[X]-=s,T[X]-=s,20>C&&(S[X]+=-3,T[X]+=-3))}if(2>V){var N=Math.min.apply(Math,S.concat(T)),G=Math.max.apply(Math,S.concat(T)),J=Math.max.apply(Math,M.concat(P)),q=Math.min.apply(Math,M.concat(P)),K=[];Math.abs(N)>_.height/2&&K.push(Math.abs(N)-_.height/2),Math.abs(G)>_.height/2&&K.push(Math.abs(G)-_.height/2),Math.abs(J)>_.width/2&&K.push(Math.abs(J)-_.width/2),Math.abs(q)>_.width/2&&K.push(Math.abs(q)-_.width/2),P=[],M=[],S=[],T=[],K.length&&(A-=Math.max.apply(Math,K)+d.indexLabelFontSize/2+2,40>A&&(A=40)),V++}}var Z=this,Q={frame:0,maxAngle:g[0],count:0};0!==Z.renderCount&&(this.animationEnabled=!1),Q.isAnimating=60,e(),this.pieDoughnutClickHandler=function(t){if(0===Q.isAnimating){var e=t.dataPointIndex,n=d.dataPointIds[e];Z._eventManager.objectMap[n].currentlyExploded===!0?(Z._eventManager.objectMap[n].userSetExploded===!0&&(d.dataPoints[e].exploded=!1),Z._eventManager.objectMap[n].currentlyExploded=!1,Q.frame=20,Q.isAnimating=20,a()):Z._eventManager.objectMap[n].currentlyExploded===!1&&(Z._eventManager.objectMap[n].userSetExploded===!0&&(d.dataPoints[e].exploded=!0),Z._eventManager.objectMap[n].currentlyExploded=!0,Q.isAnimating=20,Q.frame=0,i())}}}},g.prototype.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)}}(),y.prototype.registerSpace=function(t,e){"top"===t?this._topOccupied+=e.height:"bottom"===t?this._bottomOccupied+=e.height:"left"===t?this._leftOccupied+=e.width:"right"===t&&(this._rightOccupied+=e.width)},y.prototype.unRegisterSpace=function(t,e){"top"===t?this._topOccupied-=e.height:"bottom"===t?this._bottomOccupied-=e.height:"left"===t?this._leftOccupied-=e.width:"right"===t&&(this._rightOccupied-=e.width)},y.prototype.getFreeSpace=function(){return{x1:this._leftOccupied,y1:this._topOccupied,x2:this.canvas.width-this._rightOccupied,y2:this.canvas.height-this._bottomOccupied,width:this.canvas.width-this._rightOccupied-this._leftOccupied,height:this.canvas.height-this._bottomOccupied-this._topOccupied}},y.prototype.reset=function(){this._topOccupied=0,this._bottomOccupied=3,this._leftOccupied=0,this._rightOccupied=0},t(f,u),f.prototype.render=function(t){t&&this.ctx.save();var e=this.ctx.font;this.ctx.textBaseline=this.textBaseline,this._isDirty&&this.measureText(this.ctx),this.ctx.translate(this.x,this.y),this.ctx.font=this._getFontString(),this.ctx.rotate(Math.PI/180*this.angle);var i=0,a=this.padding,n=null;(this.borderThickness>0&&this.borderColor||this.backgroundColor)&&(this.ctx.roundRect(0,0,this.width,this.height,this.cornerRadius,this.borderThickness,this.backgroundColor,this.borderColor),"middle"===this.textBaseline&&(a+=this.fontSize/2)),this.ctx.fillStyle=this.fontColor;for(var s=0;this._wrappedText.lines.length>s;s++)n=this._wrappedText.lines[s],"right"===this.horizontalAlign?i=this.width-n.width-this.padding:"left"===this.horizontalAlign?i=this.padding:"center"===this.horizontalAlign&&(i=(this.width-2*this.padding)/2-n.width/2+this.padding),this.ctx.fillText(n.text,i,a),a+=n.height;this.ctx.font=e,t&&this.ctx.restore()},f.prototype.setText=function(t){this.text=t,this._isDirty=!0,this._wrappedText=null},f.prototype.measureText=function(){if(null===this.maxWidth)throw"Please set maxWidth and height for TextBlock";return this._wrapText(this.ctx),this._isDirty=!1,{width:this.width,height:this.height}},f.prototype._wrapText=function(){var t=""+s(this.text),e=[],i=this.ctx.font,a=0,n=0;for(this.ctx.font=this._getFontString();t.length>0;){for(var o=t,r=0,h=0,l=this.maxWidth-2*this.padding,d=this.maxHeight-2*this.padding;;){r=this.ctx.measureText(o).width,h=0;var c=0;if(!(r>l)){e.push({text:o,width:r,height:this.fontSize}),n=Math.max(n,r),a+=this.fontSize,t=s(t.slice(o.length,t.length));break}h=o.length/r*l;var x=Math.max(Math.min(Math.ceil(h),o.length-1),0);c=o.lastIndexOf(" ",x,o.length-1),o=c>=0?s(t.slice(0,c)):s(t.slice(0,x-1))}if(d&&a>d-this.fontSize&&t.length>0){var m=e.pop();e.push(m);break}}this._wrappedText={lines:e,width:n,height:a},this.width=n+2*this.padding,this.height=a+2*this.padding,this.ctx.font=i},f.prototype._getFontString=function(){return this.fontStyle+" "+this.fontWeight+" "+this.fontSize+"px "+this.fontFamily},t(b,u),b.prototype.render=function(){if(this.text){var t,e,i=this.chart.layoutManager.getFreeSpace(),a=0,n=0,s=0,o=0,r=0;"top"===this.verticalAlign||"bottom"===this.verticalAlign?(o=i.width-2*this.margin,r=.5*i.height-2*this.margin,s=0):"center"===this.verticalAlign&&("left"===this.horizontalAlign||"right"===this.horizontalAlign?(o=i.height-2*this.margin,r=.5*i.width-2*this.margin):"center"===this.horizontalAlign&&(o=i.width-2*this.margin,r=.5*i.height-2*this.margin));var h=new f(this.ctx,{fontSize:this.fontSize,fontFamily:this.fontFamily,fontColor:this.fontColor,fontStyle:this.fontStyle,fontWeight:this.fontWeight,horizontalAlign:this.horizontalAlign,verticalAlign:this.verticalAlign,borderColor:this.borderColor,borderThickness:this.borderThickness,backgroundColor:this.backgroundColor,maxWidth:o,maxHeight:r,cornerRadius:this.cornerRadius,text:this.text,padding:this.padding,textBaseline:this.borderColor&&this.borderThickness>0?"middle":"top"}),l=h.measureText();"top"===this.verticalAlign||"bottom"===this.verticalAlign?("top"===this.verticalAlign?(n=this.margin,e="top"):"bottom"===this.verticalAlign&&(n=i.y2-this.margin-l.height,e="bottom"),"left"===this.horizontalAlign?a=i.x1+this.margin:"center"===this.horizontalAlign?a=i.x1+(o/2-l.width/2)+this.margin:"right"===this.horizontalAlign&&(a=i.x2-this.margin-l.width),t=this.horizontalAlign,this.width=l.width,this.height=l.height):"center"===this.verticalAlign&&("left"===this.horizontalAlign?(a=i.x1+this.margin,n=i.y2-this.margin-(o/2-l.width/2),s=-90,e="left",this.width=l.height,this.height=l.width):"right"===this.horizontalAlign?(a=i.x2-this.margin,n=i.y1+this.margin+(o/2-l.width/2),s=90,e="right",this.width=l.height,this.height=l.width):"center"===this.horizontalAlign&&(n=i.y1+(i.height/2-l.height/2),a=i.x1+(i.width/2-l.width/2),e="center",this.width=l.width,this.height=l.height),t="center"),h.x=a,h.y=n,h.angle=s,h.horizontalAlign=t,h.render(!0),this.chart.layoutManager.registerSpace(e,{width:this.width+2*this.margin,height:this.height+2*this.margin}),this.bounds={x1:a,y1:n,x2:a+this.width,y2:n+this.height},this.ctx.textBaseline="top"}},t(P,u),P.prototype.render=function(){var t,e,i,a=this.chart.layoutManager.getFreeSpace(),n=null,s=0,o=0,r=0,h=0,l=[],d=[];this._options.fontSize===void 0&&(this.fontSize=this.chart.getAutoFontSize(this.fontSize)),"top"===this.verticalAlign||"bottom"===this.verticalAlign?(this.orientation="horizontal",n=this.verticalAlign,r=.9*a.width,h=.5*a.height):"center"===this.verticalAlign&&(this.orientation="vertical",n=this.horizontalAlign,r=.5*a.width,h=.9*a.height);for(var c=0;this.dataSeries.length>c;c++){var x=this.dataSeries[c],m=x.legendMarkerType?x.legendMarkerType:"line"!==x.type&&"stepLine"!==x.type&&"spline"!==x.type&&"scatter"!==x.type&&"bubble"!==x.type||!x.markerType?S.getDefaultLegendMarker(x.type):x.markerType,p=x.legendText?x.legendText:x.name,u=x.legendMarkerColor?x.legendMarkerColor:x.markerColor?x.markerColor:x._colorSet[0];if(e=x.markerSize||"line"!==x.type&&"stepLine"!==x.type&&"spline"!==x.type?.7*this.fontSize:0,"pie"!==x.type&&"doughnut"!==x.type)i={markerType:m,markerColor:u,text:p,textBlock:null,chartType:x.type,markerSize:e,lineColor:x._colorSet[0]},l.push(i);else for(var g=0;x.dataPoints.length>g;g++){var v=x.dataPoints[g];m=v.legendMarkerType?v.legendMarkerType:x.legendMarkerType?x.legendMarkerType:S.getDefaultLegendMarker(x.type),p=v.legendText?v.legendText:x.legendText?x.legendText:v.name?v.name:"DataPoint: "+(g+1),u=v.markerColor?v.markerColor:x.markerColor?x.markerColor:v.color?v.color:x.color?x.color:x._colorSet[g%x._colorSet.length],e=0!==v.markerSize&&(0!==x.markerSize||v.markerSize)||"line"!==x.type&&"stepLine"!==x.type&&"spline"!==x.type?.7*this.fontSize:0,i={markerType:m,markerColor:u,text:p,textBlock:null,chartType:x.type,markerSize:e},l.push(i)}i=null}if(l.length>0){t=null;var y=0;for(c=0;l.length>c;c++)i=l[c],"horizontal"===this.orientation?(i.textBlock=new f(this.ctx,{x:0,y:0,maxWidth:r,maxHeight:this.fontSize,angle:0,text:i.text,horizontalAlign:"left",fontSize:this.fontSize,fontFamily:this.fontFamily,fontWeight:this.fontWeight,fontColor:this.fontColor,fontStyle:this.fontStyle,textBaseline:"top"}),i.textBlock.measureText(),(!t||t.width+i.textBlock.width+(0===t.width?0:this.horizontalSpacing)>r)&&(t={entries:[],width:0},d.push(t),this.height=d.length*(this.fontSize+5)),i.textBlock.x=t.width+(0===t.width?0:this.horizontalSpacing),i.textBlock.y=0,t.width+=i.textBlock.width+(this.fontSize+5)+(0===t.width?0:this.horizontalSpacing),t.entries.push(i),this.width=Math.max(t.width,this.width)):(h>this.height+this.fontSize?(t={entries:[],width:0},d.push(t),this.height=d.length*this.fontSize):(t=d[y],y=(y+1)%d.length),i.textBlock=new f(this.ctx,{x:0,y:0,maxWidth:r,maxHeight:this.fontSize,angle:0,text:i.text,horizontalAlign:"left",fontSize:this.fontSize,fontFamily:this.fontFamily,fontWeight:this.fontWeight,fontColor:this.fontColor,fontStyle:this.fontStyle,textBaseline:"top"}),i.textBlock.measureText(),i.textBlock.x=t.width+(0===t.width?0:this.horizontalSpacing),i.textBlock.y=0,t.width+=i.textBlock.width+(this.fontSize+5)+(0===t.width?0:this.horizontalSpacing),t.entries.push(i),this.width=Math.max(t.width,this.width));this.height=d.length*this.fontSize}for("top"===this.verticalAlign?(o="left"===this.horizontalAlign?a.x1+2:"right"===this.horizontalAlign?a.x2-this.width-2:a.x1+a.width/2-this.width/2,s=a.y1):"center"===this.verticalAlign?(o="left"===this.horizontalAlign?a.x1+2:"right"===this.horizontalAlign?a.x2-this.width-2:a.x1+a.width/2-this.width/2,s=a.y1+a.height/2-this.height/2):"bottom"===this.verticalAlign&&(o="left"===this.horizontalAlign?a.x1+2:"right"===this.horizontalAlign?a.x2-this.width-2:a.x1+a.width/2-this.width/2,s=a.y2-this.height-5),c=0;d.length>c;c++){t=d[c];
for(var b=0;t.entries.length>b;b++){i=t.entries[b];var P=i.textBlock.x+o,M=s+c*this.fontSize;("line"===i.chartType||"stepLine"===i.chartType||"spline"===i.chartType)&&(this.ctx.strokeStyle=i.lineColor,this.ctx.lineWidth=Math.ceil(this.fontSize/8),this.ctx.beginPath(),this.ctx.moveTo(P-2,M+this.fontSize/2),this.ctx.lineTo(P+2+this.fontSize,M+this.fontSize/2),this.ctx.stroke()),O.drawMarker(P+this.fontSize/2,M+this.fontSize/2,this.ctx,i.markerType,e,i.markerColor,null,0),i.textBlock.x=P+this.fontSize+5,i.textBlock.y=M,i.textBlock.render(!0)}}this.chart.layoutManager.registerSpace(n,{width:this.width,height:this.height+5+5}),this.bounds={x1:o,y1:s,x2:o+this.width,y2:s+this.height}},t(M,u),M.prototype.render=function(){var t=this.chart.layoutManager.getFreeSpace();this.ctx.fillStyle="red",this.ctx.fillRect(t.x1,t.y1,t.x2,t.y2)},t(S,u),S.prototype.getDefaultAxisPlacement=function(){var t=this.type;return"column"===t||"line"===t||"stepLine"===t||"spline"===t||"area"===t||"splineArea"===t||"stackedColumn"===t||"stackedLine"===t||"bubble"===t||"scatter"===t||"stackedArea"===t||"stackedColumn100"===t||"stackedLine100"===t||"stackedArea100"===t?"normal":"bar"===t||"stackedBar"===t||"stackedBar100"===t?"xySwapped":"pie"===t||"doughnut"===t?"none":(window.console.log("Unknown Chart Type: "+t),null)},S.getDefaultLegendMarker=function(t){return"column"===t||"stackedColumn"===t||"stackedLine"===t||"bar"===t||"stackedBar"===t||"stackedBar100"===t||"bubble"===t||"scatter"===t||"stackedColumn100"===t||"stackedLine100"===t?"square":"line"===t||"stepLine"===t||"spline"===t||"pie"===t||"doughnut"===t?"circle":"area"===t||"splineArea"===t||"stackedArea"===t||"stackedArea100"===t?"triangle":(window.console.log("Unknown Chart Type: "+t),null)},S.prototype.findDataPointByX=function(t,e){for(var i,a=0,n=this.dataPoints.length,s={dataPoint:null,distance:1/0,index:0/0},o=0,r=null;n>a;){o++,i=(a+n)/2<<0,r=this.dataPoints[i];var h=Math.abs(r.x-t);if(s.distance>h&&(s.dataPoint=r,s.distance=h,s.index=i),t>r.x)a=i+1;else{if(!(r.x>t)){s.dataPoint=r,s.distance=h,s.index=i;break}n=i}}return e||s.dataPoint.x!==t?e&&null!==s.dataPoint?s:null:s},S.prototype.getMarkerProperties=function(t,e,i,a){var n=this.dataPoints,s=this,o=n[t].markerColor?n[t].markerColor:s.markerColor?s.markerColor:n[t].color?n[t].color:s.color?s.color:s._colorSet[t%s._colorSet.length],r=n[t].markerBorderColor?n[t].markerBorderColor:s.markerBorderColor?s.markerBorderColor:o,h=n[t].markerBorderThickness?n[t].markerBorderThickness:s.markerBorderThickness?s.markerBorderThickness:1,l=n[t].markerType?n[t].markerType:s.markerType,d=n[t].markerSize?n[t].markerSize:s.markerSize;return{x:e,y:i,ctx:a,type:l,size:d,color:o,borderColor:r,borderThickness:h}},t(T,u),T.prototype.createLabels=function(){var t,e,a,n=0;if("axisX"===this.type&&"dateTime"===this.chart.plotInfo.axisXValueType)for(a=i(new Date(this.maximum),this.interval,this.intervalType),n=this.intervalStartPosition;a>n;i(n,this.interval,this.intervalType))t="axisX"===this.type&&this.labels[n]?this.labels[n]:L(n,this.valueFormatString,this.chart._cultureInfo),e=new f(this.ctx,{x:0,y:0,maxWidth:this.maxHeight,maxHeight:this.labelFontSize,angle:this.labelAngle,text:this.prefix+t+this.suffix,horizontalAlign:"left",fontSize:this.labelFontSize,fontFamily:this.labelFontFamily,fontWeight:this.labelFontWeight,fontColor:this.labelFontColor,fontStyle:this.labelFontStyle,textBaseline:"middle"}),this._labels.push({position:n.getTime(),textBlock:e,effectiveHeight:null});else{if(a=this.maximum,this.labels&&this.labels.length){var s=Math.ceil(this.interval),o=Math.ceil(this.intervalStartPosition),r=!1;for(n=o;this.maximum>n;n+=s){if(!this.labels[n]){r=!1;break}r=!0}r&&(this.interval=s,this.intervalStartPosition=o)}for(n=this.intervalStartPosition;a>=n;n+=this.interval)t="axisX"===this.type&&this.labels[n]?this.labels[n]:B(n,this.valueFormatString,this.chart._cultureInfo),e=new f(this.ctx,{x:0,y:0,maxWidth:this.maxHeight,maxHeight:this.labelFontSize,angle:this.labelAngle,text:this.prefix+t+this.suffix,horizontalAlign:"left",fontSize:this.labelFontSize,fontFamily:this.labelFontFamily,fontWeight:this.labelFontWeight,fontColor:this.labelFontColor,fontStyle:this.labelFontStyle,textBaseline:"middle",borderThickness:0}),this._labels.push({position:n,textBlock:e,effectiveHeight:null})}},T.prototype.createLabelsAndCalculateWidth=function(){var t=0;if(this._labels=[],"left"===this._position||"right"===this._position){this.createLabels();for(var e=0;this._labels.length>e;e++){var i=this._labels[e].textBlock,a=i.measureText(),n=0===this.labelAngle?a.width:a.width*Math.cos(Math.PI/180*Math.abs(this.labelAngle))+a.height/2*Math.sin(Math.PI/180*Math.abs(this.labelAngle));n>t&&(t=n),this._labels[e].effectiveWidth=n}}var s=this.title?this.titleFontSize+5:0;return s+t+this.tickLength+10},T.prototype.createLabelsAndCalculateHeight=function(){var t=0;this._labels=[];var e,i=0;if(this.createLabels(),"bottom"===this._position||"top"===this._position)for(i=0;this._labels.length>i;i++){e=this._labels[i].textBlock;var a=e.measureText(),n=0;n=0===this.labelAngle?a.height:a.width*Math.sin(Math.PI/180*Math.abs(this.labelAngle))+a.height/2*Math.cos(Math.PI/180*Math.abs(this.labelAngle)),n>t&&(t=n),this._labels[i].effectiveHeight=n}var s=this.title?this.titleFontSize+5:0;return s+t+this.tickLength},T.setLayoutAndRender=function(t,e,i,a,n){var s,o,r,h,l,d=t.chart,c=d.ctx;if(t.calculateAxisParameters(),e&&e.calculateAxisParameters(),i&&i.calculateAxisParameters(),e&&i&&e._options.maximum===void 0&&e._options.minimum===void 0&&e._options.interval===void 0&&i._options.maximum===void 0&&i._options.minimum===void 0&&i._options.interval===void 0){var x=(e.maximum-e.minimum)/e.interval,m=(i.maximum-i.minimum)/i.interval;x>m?i.maximum=i.interval*x+i.minimum:m>x&&(e.maximum=e.interval*m+e.minimum)}var p=e?e.lineThickness?e.lineThickness:0:0,u=i?i.lineThickness?i.lineThickness:0:0,g=e?e.gridThickness?e.gridThickness:0:0,v=i?i.gridThickness?i.gridThickness:0:0,y=e?e.margin:0;if("normal"===a){var f=e?e.createLabelsAndCalculateWidth():0,b=i?i.createLabelsAndCalculateWidth():0,P=t.createLabelsAndCalculateHeight();o=n.x1+f+y,r=n.y2-P-t.margin,h=n.x2-b>t.chart.canvas.width-10?t.chart.canvas.width-10:n.x2-b,l=n.y2-t.margin,t.lineCoordinates={x1:o,y1:r,x2:h,y2:r,width:Math.abs(h-o)},t.boundingRect={x1:o,y1:r,x2:h,y2:l,width:h-o,height:l-r},e&&(o=n.x1+e.margin,r=10>n.y1?10:n.y1,h=n.x1+f+e.margin,l=n.y2-P-t.margin,e.lineCoordinates={x1:h,y1:r,x2:h,y2:l,height:Math.abs(l-r)},e.boundingRect={x1:o,y1:r,x2:h,y2:l,width:h-o,height:l-r}),i&&(o=t.lineCoordinates.x2,r=10>n.y1?10:n.y1,h=o+b+i.margin,l=n.y2-P-t.margin,i.lineCoordinates={x1:o,y1:r,x2:o,y2:l,height:Math.abs(l-r)},i.boundingRect={x1:o,y1:r,x2:h,y2:l,width:h-o,height:l-r}),c.save(),c.rect(t.boundingRect.x1-40,t.boundingRect.y1,t.boundingRect.width+80,t.boundingRect.height),c.clip(),t.renderLabelsTicksAndTitle(),c.restore(),e&&e.renderLabelsTicksAndTitle(),i&&i.renderLabelsTicksAndTitle(),s=t.chart.getPlotArea(),c.save(),c.rect(s.x1,s.y1-Math.max(v,g)/2,Math.abs(s.x2-s.x1),Math.abs(s.y2-s.y1+Math.max(v,g)/2+Math.max(v,g,t.lineThickness)/2)),c.clip(),t.calculateValueToPixelConvertionParameters(),e&&e.calculateValueToPixelConvertionParameters(),i&&i.calculateValueToPixelConvertionParameters(),t.renderInterlacedColors(),e&&e.renderInterlacedColors(),i&&i.renderInterlacedColors(),c.restore(),t.renderGrid(),e&&e.renderGrid(),i&&i.renderGrid(),t.renderAxisLine(),e&&e.renderAxisLine(),i&&i.renderAxisLine()}else{var M=e?e.createLabelsAndCalculateHeight():0,S=i?i.createLabelsAndCalculateHeight():0,T=t.createLabelsAndCalculateWidth();e&&(o=n.x1+T+t.margin+t.lineThickness/2,r=n.y2-M-e.margin,h=n.x2>e.chart.canvas.width-10?e.chart.canvas.width-10:n.x2,l=n.y2-e.margin,e.lineCoordinates={x1:o,y1:r,x2:h,y2:r,width:Math.abs(h-o)},e.boundingRect={x1:o,y1:r,x2:h,y2:l,width:h-o,height:M}),i&&(o=n.x1+T+t.margin+t.lineThickness/2,r=n.y1+i.margin,h=n.x2>i.chart.canvas.width-10?i.chart.canvas.width-10:n.x2,l=n.y1+i.margin+S,i.lineCoordinates={x1:o,y1:l,x2:h,y2:l,width:Math.abs(h-o)},i.boundingRect={x1:o,y1:r,x2:h,y2:l,width:h-o,height:S}),o=n.x1+t.margin,r=10>n.y1+S+u/2?10:n.y1+S+u/2,h=n.x1+T+t.margin,l=n.y2-M-y-p/2,t.lineCoordinates={x1:h,y1:r,x2:h,y2:l,height:Math.abs(l-r)},t.boundingRect={x1:o,y1:r,x2:h,y2:l,width:h-o,height:l-r},c.save(),e&&e.renderLabelsTicksAndTitle(),i&&i.renderLabelsTicksAndTitle(),t.renderLabelsTicksAndTitle(),c.save(),c.rect(s.x1-Math.max(t.lineThickness,g,v)/2,s.y1,Math.abs(s.x2-s.x1+Math.max(t.lineThickness,g,v)/2+Math.max(g,v)/2),Math.abs(s.y2-s.y1)),c.clip(),t.calculateValueToPixelConvertionParameters(),e&&e.calculateValueToPixelConvertionParameters(),i&&i.calculateValueToPixelConvertionParameters(),t.renderInterlacedColors(),e&&e.renderInterlacedColors(),i&&i.renderInterlacedColors(),c.restore(),t.renderGrid(),e&&e.renderGrid(),i&&i.renderGrid(),t.renderAxisLine(),e&&e.renderAxisLine(),i&&i.renderAxisLine()}},T.prototype.renderLabelsTicksAndTitle=function(){var t,e,i,a,n=!1,s=0,o=.9,r=0;if(0!==this.labelAngle&&360!==this.labelAngle&&(o=1.2),"bottom"===this._position||"top"===this._position){for(t=0;this._labels.length>t;t++)i=this._labels[t],this.minimum>i.position||(e=i.textBlock.width*Math.cos(Math.PI/180*this.labelAngle)+i.textBlock.height*Math.sin(Math.PI/180*this.labelAngle),s+=e);s>this.lineCoordinates.width*o&&(n=!0)}if("left"===this._position||"right"===this._position){for(t=0;this._labels.length>t;t++)i=this._labels[t],this.minimum>i.position||(e=i.textBlock.height*Math.cos(Math.PI/180*this.labelAngle)+i.textBlock.width*Math.sin(Math.PI/180*this.labelAngle),s+=e);s>this.lineCoordinates.height*o&&(n=!0)}if("bottom"===this._position){for(t=0,this.ctx.lineWidth=this.tickThickness,this.ctx.strokeStyle=this.tickColor,t=0;this._labels.length>t;t++)i=this._labels[t],this.minimum>i.position||i.position>this.maximum||(a=this.getPixelCoordinatesOnAxis(i.position),this.tickThickness&&(this.ctx.beginPath(),this.ctx.moveTo(a.x<<0,a.y<<0),this.ctx.lineTo(a.x<<0,a.y+this.tickLength<<0),this.ctx.stroke()),n&&0!==r++%2||(0===i.textBlock.angle?(a.x-=i.textBlock.width/2,a.y+=this.tickLength+i.textBlock.height/2):(a.x-=0>this.labelAngle?i.textBlock.width*Math.cos(Math.PI/180*this.labelAngle):0,a.y+=this.tickLength+Math.abs(0>this.labelAngle?i.textBlock.width*Math.sin(Math.PI/180*this.labelAngle):0)),i.textBlock.x=a.x,i.textBlock.y=a.y,i.textBlock.render(!0)));this.title&&(this._titleTextBlock=new f(this.ctx,{x:this.lineCoordinates.x1,y:this.boundingRect.y2-this.titleFontSize-5,maxWidth:this.lineCoordinates.width,maxHeight:this.titleFontSize,angle:0,text:this.title,horizontalAlign:"center",fontSize:this.titleFontSize,fontFamily:this.titleFontFamily,fontWeight:this.titleFontWeight,fontColor:this.titleFontColor,fontStyle:this.titleFontStyle,textBaseline:"top"}),this._titleTextBlock.measureText(),this._titleTextBlock.x=this.lineCoordinates.x1+this.lineCoordinates.width/2-this._titleTextBlock.width/2,this._titleTextBlock.render(!0))}else if("top"===this._position){for(t=0,this.ctx.lineWidth=this.tickThickness,this.ctx.strokeStyle=this.tickColor,t=0;this._labels.length>t;t++)i=this._labels[t],this.minimum>i.position||i.position>this.maximum||(a=this.getPixelCoordinatesOnAxis(i.position),this.tickThickness&&(this.ctx.beginPath(),this.ctx.moveTo(a.x<<0,a.y<<0),this.ctx.lineTo(a.x<<0,a.y-this.tickLength<<0),this.ctx.stroke()),n&&0!==r++%2||(0===i.textBlock.angle?(a.x-=i.textBlock.width/2,a.y-=this.tickLength+i.textBlock.height/2):(a.x-=this.labelAngle>0?i.textBlock.width*Math.cos(Math.PI/180*this.labelAngle):0,a.y-=this.tickLength+Math.abs(this.labelAngle>0?i.textBlock.width*Math.sin(Math.PI/180*this.labelAngle)+5:5)),i.textBlock.x=a.x,i.textBlock.y=a.y,i.textBlock.render(!0)));this.title&&(this._titleTextBlock=new f(this.ctx,{x:this.lineCoordinates.x1,y:this.boundingRect.y1,maxWidth:this.lineCoordinates.width,maxHeight:this.titleFontSize,angle:0,text:this.title,horizontalAlign:"center",fontSize:this.titleFontSize,fontFamily:this.titleFontFamily,fontWeight:this.titleFontWeight,fontColor:this.titleFontColor,fontStyle:this.titleFontStyle,textBaseline:"top"}),this._titleTextBlock.measureText(),this._titleTextBlock.x=this.lineCoordinates.x1+this.lineCoordinates.width/2-this._titleTextBlock.width/2,this._titleTextBlock.render(!0))}else if("left"===this._position){for(this.ctx.lineWidth=this.tickThickness,this.ctx.strokeStyle=this.tickColor,t=0;this._labels.length>t;t++)i=this._labels[t],this.minimum>i.position||i.position>this.maximum||(a=this.getPixelCoordinatesOnAxis(i.position),this.tickThickness&&(this.ctx.beginPath(),this.ctx.moveTo(a.x<<0,a.y<<0),this.ctx.lineTo(a.x-this.tickLength<<0,a.y<<0),this.ctx.stroke()),n&&0!==r++%2||(i.textBlock.x=a.x-i.textBlock.width*Math.cos(Math.PI/180*this.labelAngle)-this.tickLength-5,i.textBlock.y=a.y-i.textBlock.width*Math.sin(Math.PI/180*this.labelAngle),i.textBlock.render(!0)));this.title&&(this._titleTextBlock=new f(this.ctx,{x:this.boundingRect.x1+5,y:this.lineCoordinates.y2,maxWidth:this.lineCoordinates.height,maxHeight:this.titleFontSize,angle:-90,text:this.title,horizontalAlign:"center",fontSize:this.titleFontSize,fontFamily:this.titleFontFamily,fontWeight:this.titleFontWeight,fontColor:this.titleFontColor,fontStyle:this.titleFontStyle,textBaseline:"top"}),this._titleTextBlock.measureText(),this._titleTextBlock.y=this.lineCoordinates.height/2+this._titleTextBlock.width/2+this.lineCoordinates.y1,this._titleTextBlock.render(!0))}else if("right"===this._position){for(this.ctx.lineWidth=this.tickThickness,this.ctx.strokeStyle=this.tickColor,t=0;this._labels.length>t;t++)i=this._labels[t],this.minimum>i.position||i.position>this.maximum||(a=this.getPixelCoordinatesOnAxis(i.position),this.tickThickness&&(this.ctx.beginPath(),this.ctx.moveTo(a.x<<0,a.y<<0),this.ctx.lineTo(a.x+this.tickLength<<0,a.y<<0),this.ctx.stroke()),n&&0!==r++%2||(i.textBlock.x=a.x+this.tickLength+5,i.textBlock.y=a.y,i.textBlock.render(!0)));this.title&&(this._titleTextBlock=new f(this.ctx,{x:this.boundingRect.x2-5,y:this.lineCoordinates.y2,maxWidth:this.lineCoordinates.height,maxHeight:this.titleFontSize,angle:90,text:this.title,horizontalAlign:"center",fontSize:this.titleFontSize,fontFamily:this.titleFontFamily,fontWeight:this.titleFontWeight,fontColor:this.titleFontColor,fontStyle:this.titleFontStyle,textBaseline:"top"}),this._titleTextBlock.measureText(),this._titleTextBlock.y=this.lineCoordinates.height/2-this._titleTextBlock.width/2+this.lineCoordinates.y1,this._titleTextBlock.render(!0))}},T.prototype.renderInterlacedColors=function(){var t,e,i=0,a=this.chart.getPlotArea();if("bottom"!==this._position&&"top"!==this._position||!this.interlacedColor){if(("left"===this._position||"right"===this._position)&&this.interlacedColor)for(this.ctx.fillStyle=this.interlacedColor,i=0;this._labels.length>i;i+=2)e=this.getPixelCoordinatesOnAxis(this._labels[i].position),t=i+1>=this._labels.length?this.getPixelCoordinatesOnAxis(this.maximum):this.getPixelCoordinatesOnAxis(this._labels[i+1].position),this.ctx.fillRect(a.x1,t.y,Math.abs(a.x1-a.x2),Math.abs(t.y-e.y))}else for(this.ctx.fillStyle=this.interlacedColor,i=0;this._labels.length>i;i+=2)t=this.getPixelCoordinatesOnAxis(this._labels[i].position),e=i+1>=this._labels.length?this.getPixelCoordinatesOnAxis(this.maximum):this.getPixelCoordinatesOnAxis(this._labels[i+1].position),this.ctx.fillRect(t.x,a.y1,Math.abs(e.x-t.x),Math.abs(a.y1-a.y2))},T.prototype.renderGrid=function(){var t,e,i=this.chart.getPlotArea();if("bottom"===this._position||"top"===this._position){if(this.gridThickness&&this.gridThickness>0)for(this.ctx.lineWidth=this.gridThickness,this.ctx.strokeStyle=this.gridColor,this.ctx.beginPath(),e=0;this._labels.length>e;e++)this.minimum>this._labels[e].position||this._labels[e].position>this.maximum||(t=this.getPixelCoordinatesOnAxis(this._labels[e].position),this.ctx.moveTo(t.x<<0,i.y1<<0),this.ctx.lineTo(t.x<<0,i.y2<<0),this.ctx.stroke())}else if(("left"===this._position||"right"===this._position)&&this.gridThickness&&this.gridThickness>0)for(this.ctx.lineWidth=this.gridThickness,this.ctx.strokeStyle=this.gridColor,this.ctx.beginPath(),e=0;this._labels.length>e;e++)this.minimum>this._labels[e].position||this._labels[e].position>this.maximum||(t=this.getPixelCoordinatesOnAxis(this._labels[e].position),this.ctx.moveTo(i.x1<<0,t.y<<0),this.ctx.lineTo(i.x2<<0,t.y<<0),this.ctx.stroke())},T.prototype.renderAxisLine=function(){"bottom"===this._position||"top"===this._position?this.lineThickness&&(this.ctx.lineWidth=this.lineThickness,this.ctx.strokeStyle=this.lineColor?this.lineColor:"black",this.ctx.beginPath(),this.ctx.moveTo(this.lineCoordinates.x1,this.lineCoordinates.y1),this.ctx.lineTo(this.lineCoordinates.x2,this.lineCoordinates.y2),this.ctx.stroke()):("left"===this._position||"right"===this._position)&&this.lineThickness&&(this.ctx.lineWidth=this.lineThickness,this.ctx.strokeStyle=this.lineColor,this.ctx.beginPath(),this.ctx.moveTo(this.lineCoordinates.x1,this.lineCoordinates.y1),this.ctx.lineTo(this.lineCoordinates.x2,this.lineCoordinates.y2),this.ctx.stroke())},T.prototype.getPixelCoordinatesOnAxis=function(t){var e,i={},a=this.lineCoordinates.width,n=this.lineCoordinates.height;return("bottom"===this._position||"top"===this._position)&&(e=a/Math.abs(this.maximum-this.minimum),i.x=this.lineCoordinates.x1+e*(t-this.minimum),i.y=this.lineCoordinates.y1),("left"===this._position||"right"===this._position)&&(e=n/Math.abs(this.maximum-this.minimum),i.y=this.lineCoordinates.y2-e*(t-this.minimum),i.x=this.lineCoordinates.x2),i},T.prototype.calculateValueToPixelConvertionParameters=function(){var t={pixelPerUnit:null,minimum:null,reference:null},e=this.lineCoordinates.width,i=this.lineCoordinates.height;t.minimum=this.minimum,("bottom"===this._position||"top"===this._position)&&(t.pixelPerUnit=e/Math.abs(this.maximum-this.minimum),t.reference=this.lineCoordinates.x1),("left"===this._position||"right"===this._position)&&(t.pixelPerUnit=-1*i/Math.abs(this.maximum-this.minimum),t.reference=this.lineCoordinates.y2),this.convertionParameters=t},T.prototype.calculateAxisParameters=function(){var t=this.chart.layoutManager.getFreeSpace();"bottom"===this._position||"top"===this._position?(this.maxWidth=t.width,this.maxHeight=t.height):(this.maxWidth=t.height,this.maxHeight=t.width);var e,i,a,n,s="axisX"===this.type?500>this.maxWidth?8:Math.max(6,Math.floor(this.maxWidth/62)):Math.floor(this.maxWidth/40);if("axisX"===this.type?(e=null!==this.sessionVariables.internalMinimum?this.sessionVariables.internalMinimum:this.dataInfo.viewPortMin,i=null!==this.sessionVariables.internalMaximum?this.sessionVariables.internalMaximum:this.dataInfo.viewPortMax,0===i-e&&(i+=.5,e-=.5),a=1/0!==this.dataInfo.minDiff?this.dataInfo.minDiff:1):"axisY"===this.type&&(e=this._options.minimum===void 0?this.dataInfo.viewPortMin:this._options.minimum,i=this._options.maximum===void 0?this.dataInfo.viewPortMax:this._options.maximum,0===i-e?(i+=5,e-=5):(0!==i&&(i+=Math.abs(.005)),0!==e&&(e-=Math.abs(.005))),this.includeZero&&this._options.minimum===void 0&&e>0&&(e=0),this.includeZero&&this._options.maximum===void 0&&0>i&&(i=0)),"axisX"===this.type&&"dateTime"===this.chart.plotInfo.axisXValueType?(n=i-e,this.intervalType||(s>=n/1?(this.interval=1,this.intervalType="millisecond"):s>=n/2?(this.interval=2,this.intervalType="millisecond"):s>=n/5?(this.interval=5,this.intervalType="millisecond"):s>=n/10?(this.interval=10,this.intervalType="millisecond"):s>=n/20?(this.interval=20,this.intervalType="millisecond"):s>=n/50?(this.interval=50,this.intervalType="millisecond"):s>=n/100?(this.interval=100,this.intervalType="millisecond"):s>=n/200?(this.interval=200,this.intervalType="millisecond"):s>=n/250?(this.interval=250,this.intervalType="millisecond"):s>=n/300?(this.interval=300,this.intervalType="millisecond"):s>=n/400?(this.interval=400,this.intervalType="millisecond"):s>=n/500?(this.interval=500,this.intervalType="millisecond"):s>=n/(1*F.secondDuration)?(this.interval=1,this.intervalType="second"):s>=n/(2*F.secondDuration)?(this.interval=2,this.intervalType="second"):s>=n/(5*F.secondDuration)?(this.interval=5,this.intervalType="second"):s>=n/(10*F.secondDuration)?(this.interval=10,this.intervalType="second"):s>=n/(15*F.secondDuration)?(this.interval=15,this.intervalType="second"):s>=n/(20*F.secondDuration)?(this.interval=20,this.intervalType="second"):s>=n/(30*F.secondDuration)?(this.interval=30,this.intervalType="second"):s>=n/(1*F.minuteDuration)?(this.interval=1,this.intervalType="minute"):s>=n/(2*F.minuteDuration)?(this.interval=2,this.intervalType="minute"):s>=n/(5*F.minuteDuration)?(this.interval=5,this.intervalType="minute"):s>=n/(10*F.minuteDuration)?(this.interval=10,this.intervalType="minute"):s>=n/(15*F.minuteDuration)?(this.interval=15,this.intervalType="minute"):s>=n/(20*F.minuteDuration)?(this.interval=20,this.intervalType="minute"):s>=n/(30*F.minuteDuration)?(this.interval=30,this.intervalType="minute"):s>=n/(1*F.hourDuration)?(this.interval=1,this.intervalType="hour"):s>=n/(2*F.hourDuration)?(this.interval=2,this.intervalType="hour"):s>=n/(3*F.hourDuration)?(this.interval=3,this.intervalType="hour"):s>=n/(6*F.hourDuration)?(this.interval=6,this.intervalType="hour"):s>=n/(1*F.dayDuration)?(this.interval=1,this.intervalType="day"):s>=n/(2*F.dayDuration)?(this.interval=2,this.intervalType="day"):s>=n/(4*F.dayDuration)?(this.interval=4,this.intervalType="day"):s>=n/(1*F.weekDuration)?(this.interval=1,this.intervalType="week"):s>=n/(2*F.weekDuration)?(this.interval=2,this.intervalType="week"):s>=n/(3*F.weekDuration)?(this.interval=3,this.intervalType="week"):s>=n/(1*F.monthDuration)?(this.interval=1,this.intervalType="month"):s>=n/(2*F.monthDuration)?(this.interval=2,this.intervalType="month"):s>=n/(3*F.monthDuration)?(this.interval=3,this.intervalType="month"):s>=n/(6*F.monthDuration)?(this.interval=6,this.intervalType="month"):s>=n/(1*F.yearDuration)?(this.interval=1,this.intervalType="year"):s>=n/(2*F.yearDuration)?(this.interval=2,this.intervalType="year"):s>=n/(4*F.yearDuration)?(this.interval=4,this.intervalType="year"):(this.interval=Math.floor(T.getNiceNumber(n/(s-1),!0)/F.yearDuration),this.intervalType="year")),this.minimum=null!==this.sessionVariables.internalMinimum?this.sessionVariables.internalMinimum:e-a/2,this.maximum=this.sessionVariables.internalMaximum?this.sessionVariables.internalMaximum:i+a/2,this.valueFormatString||("year"===this.intervalType?this.valueFormatString="YYYY":"month"===this.intervalType?this.valueFormatString="MMM YYYY":"week"===this.intervalType?this.valueFormatString="MMM DD YYYY":"day"===this.intervalType?this.valueFormatString="MMM DD YYYY":"hour"===this.intervalType?this.valueFormatString="hh:mm TT":"minute"===this.intervalType?this.valueFormatString="hh:mm TT":"second"===this.intervalType?this.valueFormatString="hh:mm:ss TT":"millisecond"===this.intervalType&&(this.valueFormatString="fff'ms'")),this.intervalStartPosition=this.getLabelStartPoint(new Date(this.minimum),this.intervalType,this.interval)):(this.intervalType="number",n=T.getNiceNumber(i-e,!1),this.interval=this._options&&this._options.interval?this._options.interval:T.getNiceNumber(n/(s-1),!0),this.minimum=null!==this.sessionVariables.internalMinimum?this.sessionVariables.internalMinimum:Math.floor(e/this.interval)*this.interval,this.maximum=null!==this.sessionVariables.internalMaximum?this.sessionVariables.internalMaximum:Math.ceil(i/this.interval)*this.interval,"axisX"===this.type?(null===this.sessionVariables.internalMinimum&&(this.minimum=e-a/2),this.sessionVariables.internalMaximum||(this.maximum=i+a/2),this.intervalStartPosition=Math.floor((this.minimum+this.interval)/this.interval)*this.interval):"axisY"===this.type&&(this.intervalStartPosition=this.minimum)),"axisX"===this.type&&(this._absoluteMinimum=this._options&&this._options.minimum!==void 0?this._options.minimum:this.dataInfo.min-a/2,this._absoluteMaximum=this._options&&this._options.maximum!==void 0?this._options.maximum:this.dataInfo.max+a/2),!this.valueFormatString&&(this.valueFormatString="#,##0.##",n=Math.abs(this.maximum-this.minimum),1>n)){var o=Math.floor(Math.abs(Math.log(n)/Math.LN10))+2;if(o>2)for(var r=0;o-2>r;r++)this.valueFormatString+="#"}},T.prototype._getFontString=function(){return this.labelFontStyle+" "+this.labelFontWeight+" "+this.labelFontSize+"px "+this.labelFontFamily},T.getNiceNumber=function(t,e){var i,a=Math.floor(Math.log(t)/Math.LN10),n=t/Math.pow(10,a);return i=e?1.5>n?1:3>n?2:7>n?5:10:1>=n?1:2>=n?2:5>=n?5:10,i*Math.pow(10,a)},T.prototype.getLabelStartPoint=function(){var t=a(this.interval,this.intervalType),e=Math.floor(this.minimum/t)*t,i=new Date(e);return"millisecond"===this.intervalType||("second"===this.intervalType?i.getMilliseconds()>0&&(i.setSeconds(i.getSeconds()+1),i.setMilliseconds(0)):"minute"===this.intervalType?(i.getSeconds()>0||i.getMilliseconds()>0)&&(i.setMinutes(i.getMinutes()+1),i.setSeconds(0),i.setMilliseconds(0)):"hour"===this.intervalType?(i.getMinutes()>0||i.getSeconds()>0||i.getMilliseconds()>0)&&(i.setHours(i.getHours()+1),i.setMinutes(0),i.setSeconds(0),i.setMilliseconds(0)):"day"===this.intervalType?(i.getHours()>0||i.getMinutes()>0||i.getSeconds()>0||i.getMilliseconds()>0)&&(i.setDate(i.getDate()+1),i.setHours(0),i.setMinutes(0),i.setSeconds(0),i.setMilliseconds(0)):"week"===this.intervalType?(i.getDay()>0||i.getHours()>0||i.getMinutes()>0||i.getSeconds()>0||i.getMilliseconds()>0)&&(i.setDate(i.getDate()+(7-i.getDay())),i.setHours(0),i.setMinutes(0),i.setSeconds(0),i.setMilliseconds(0)):"month"===this.intervalType?(i.getDate()>1||i.getHours()>0||i.getMinutes()>0||i.getSeconds()>0||i.getMilliseconds()>0)&&(i.setMonth(i.getMonth()+1),i.setDate(1),i.setHours(0),i.setMinutes(0),i.setSeconds(0),i.setMilliseconds(0)):"year"===this.intervalType&&(i.getMonth()>0||i.getDate()>1||i.getHours()>0||i.getMinutes()>0||i.getSeconds()>0||i.getMilliseconds()>0)&&(i.setFullYear(i.getFullYear()+1),i.setMonth(0),i.setDate(1),i.setHours(0),i.setMinutes(0),i.setSeconds(0),i.setMilliseconds(0))),i},t(C,u),C.prototype._initialize=function(){if(this.enabled){this.container=document.createElement("div"),this.container.style.height="auto",this.container.style.position="absolute",this.container.style.boxShadow="1px 1px 2px 2px rgba(0,0,0,0.1)",this.container.style.zIndex="1000",this.container.style.display="none";var t='<div style=" width: auto;';t+="height: auto;",t+="min-width: 50px;",t+="line-height: 20px;",t+="padding: 5px;",t+="font-family: Calibri, Arial, Georgia, serif;",t+="font-weight: 400;",t+="font-style: italic;",t+="font-size: 14px;",t+="color: #000000;",t+="text-shadow: 1px 1px 1px rgba(0, 0, 0, 0.1);",t+="text-align: left;",t+="border: 2px solid gray;",t+="background: rgba(255,255,255,.9);",t+="text-indent: 0px;",t+="white-space: nowrap;",t+="border-radius: 10px;",t+='} "> Sample Tooltip</div>',this.container.innerHTML=t,this.contentDiv=this.container.firstChild,this.container.style.borderRadius=this.contentDiv.style.borderRadius,this.chart._canvasJSContainer.appendChild(this.container)}},C.prototype.mouseMoveHandler=function(t,e){var i=this;clearTimeout(this._timerId),this._timerId=setTimeout(function(){i._updateToolTip(t,e)},5)},C.prototype._updateToolTip=function(t,e){var i,a;if(this.enabled){if(t===void 0||e===void 0){if(isNaN(this._prevX)||isNaN(this._prevY))return;t=this._prevX,e=this._prevY}else this._prevX=t,this._prevY=e;var n,s=null,o=null,r=[],h=0;if(this.shared&&"none"!==this.chart.plotInfo.axisPlacement){h="xySwapped"===this.chart.plotInfo.axisPlacement?(this.chart.axisX.maximum-this.chart.axisX.minimum)/this.chart.axisX.lineCoordinates.height*(this.chart.axisX.lineCoordinates.y2-e)+this.chart.axisX.minimum:(this.chart.axisX.maximum-this.chart.axisX.minimum)/this.chart.axisX.lineCoordinates.width*(t-this.chart.axisX.lineCoordinates.x1)+this.chart.axisX.minimum;for(var l=[],d=0;this.chart.data.length>d;d++)i={},i=this.chart.data[d].findDataPointByX(h,!0),i&&i.index>=0&&(i.dataSeries=this.chart.data[d],l.push(i));if(0===l.length)return;l.sort(function(t,e){return t.distance-e.distance});var c=l[0];for(d=0;l.length>d;d++)l[d].dataPoint.x.valueOf()===c.dataPoint.x.valueOf()&&r.push(l[d]);l=null}else{var m=x(t,e,this.chart._eventManager.ghostCtx);if(m>0&&this.chart._eventManager.objectMap[m]!==void 0){var p=this.chart._eventManager.objectMap[m];this.currentSeriesIndex=p.dataSeriesIndex,this.currentDataPointIndex=p.dataPointIndex>=0?p.dataPointIndex:-1}else this.currentDataPointIndex=-1;if(this.currentSeriesIndex>=0){if(o=this.chart.data[this.currentSeriesIndex],i={},this.currentDataPointIndex>=0)s=o.dataPoints[this.currentDataPointIndex],i.dataSeries=o,i.dataPoint=s,i.index=this.currentDataPointIndex,i.distance=Math.abs(s.x-h);else{if("line"!==o.type&&"stepLine"!==o.type&&"spline"!==o.type&&"area"!==o.type&&"splineArea"!==o.type&&"stackedArea"!==o.type&&"stackedArea100"!==o.type)return;h=(this.chart.axisX.maximum-this.chart.axisX.minimum)/this.chart.axisX.lineCoordinates.width*(t-this.chart.axisX.lineCoordinates.x1)+this.chart.axisX.minimum.valueOf(),i=o.findDataPointByX(h,!0),i.dataSeries=o,this.currentDataPointIndex=i.index,s=i.dataPoint}r.push(i)}}if(r.length>0){this.highlightObjects(r);var u="";u=this.getToolTipInnerHTML({entries:r}),this.contentDiv.innerHTML=u,this.contentDiv.innerHTML=u;var g=!1;"none"===this.container.style.display&&(g=!0,this.container.style.display="block"),this.contentDiv.style.borderRightColor=this.contentDiv.style.borderLeftColor=this.contentDiv.style.borderColor=this.borderColor?this.borderColor:r[0].dataPoint.color?r[0].dataPoint.color:r[0].dataSeries.color?r[0].dataSeries.color:r[0].dataSeries._colorSet[r[0].index%r[0].dataSeries._colorSet.length],a="pie"===r[0].dataSeries.type||"doughnut"===r[0].dataSeries.type||"bar"===r[0].dataSeries.type||"stackedBar"===r[0].dataSeries.type||"stackedBar100"===r[0].dataSeries.type?t-10-this.container.clientWidth:this.chart.axisX.lineCoordinates.width/Math.abs(this.chart.axisX.maximum-this.chart.axisX.minimum)*Math.abs(r[0].dataPoint.x-this.chart.axisX.minimum)+this.chart.axisX.lineCoordinates.x1+.5-this.container.clientWidth<<0,a=a>0?a+"px":a+this.container.clientWidth+20+"px",n=1!==r.length||this.shared||"line"!==r[0].dataSeries.type&&"stepLine"!==r[0].dataSeries.type&&"spline"!==r[0].dataSeries.type&&"area"!==r[0].dataSeries.type&&"splineArea"!==r[0].dataSeries.type&&"stackedArea"!==r[0].dataSeries.type&&"stackedArea100"!==r[0].dataSeries.type?"bar"===r[0].dataSeries.type||"stackedBar"===r[0].dataSeries.type||"stackedBar100"===r[0].dataSeries.type?r[0].dataSeries.axisX.lineCoordinates.y2-r[0].dataSeries.axisX.lineCoordinates.height/Math.abs(r[0].dataSeries.axisX.maximum-r[0].dataSeries.axisX.minimum)*Math.abs(r[0].dataPoint.x-r[0].dataSeries.axisX.minimum)+.5<<0:e:r[0].dataSeries.axisY.lineCoordinates.y2-r[0].dataSeries.axisY.lineCoordinates.height/Math.abs(r[0].dataSeries.axisY.maximum-r[0].dataSeries.axisY.minimum)*Math.abs(r[0].dataPoint.y-r[0].dataSeries.axisY.minimum)+.5<<0,n=-n+10,n+this.container.clientHeight+5>0&&(n-=n+this.container.clientHeight+5-0),n+="px",this.container.style.left=a,this.container.style.bottom=n,!this.animationEnabled||g?this.disableAnimation():this.enableAnimation()}}},C.prototype.highlightObjects=function(t){var e;if(this.enabled){var i=this.chart.overlaidCanvasCtx;this.chart.resetOverlayedCanvas();var a=this.chart.getPlotArea();i.beginPath(),i.rect(a.x1,a.y1,a.width,a.height),i.clip();for(var n=0;t.length>n;n++){var s=t[n],o=this.chart._eventManager.objectMap[s.dataSeries.dataPointIds[s.index]];if(o&&o.objectType&&"dataPoint"===o.objectType){var r=this.chart.data[o.dataSeriesIndex],h=o.dataPointIndex;"line"===r.type||"stepLine"===r.type||"spline"===r.type||"scatter"===r.type||"area"===r.type||"splineArea"===r.type||"stackedArea"===r.type||"stackedArea100"===r.type?(e=r.getMarkerProperties(h,o.x1,o.y1,this.chart.overlaidCanvasCtx),e.size=Math.max(1.5*e.size<<0,10),O.drawMarkers([e])):"bubble"===r.type?(e=r.getMarkerProperties(h,o.x1,o.y1,this.chart.overlaidCanvasCtx),e.size=o.size,e.color="white",e.borderColor="white",i.globalAlpha=.3,O.drawMarkers([e]),i.globalAlpha=1):"column"===r.type||"stackedColumn"===r.type||"stackedColumn100"===r.type||"bar"===r.type||"stackedBar"===r.type||"stackedBar100"===r.type?(i.globalAlpha=.3,D(i,o.x1,o.y1,o.x2,o.y2,"white",!1,!1,!1,!1),i.globalAlpha=1):("pie"===r.type||"doughnut"===r.type)&&(i.globalAlpha=.3,E(i,o.center,o.radius,"white",r.type,o.startAngle,o.endAngle),i.globalAlpha=1)
}}i.globalAlpha=1,i.restore()}},C.prototype.getToolTipInnerHTML=function(t){for(var e=t.entries,i="",a=null,n=null,s=0,o="",r=!0,h=0;e.length>h;h++)if(e[h].dataSeries.toolTipContent||e[h].dataPoint.toolTipContent){r=!1;break}if(r&&this.content&&"function"==typeof this.content)i=this.content({entries:e});else if(e.length>1)for(h=0;e.length>h;h++)a=e[h].dataSeries,n=e[h].dataPoint,s=e[h].index,o="",0===h&&r&&!this.content&&(o+=this.chart.axisX.labels[n.x]!==void 0?this.chart.axisX.labels[n.x]:"{x}",o+="</br>"),"line"===a.type||"stepLine"===a.type||"spline"===a.type||"area"===a.type||"splineArea"===a.type||"column"===a.type||"bar"===a.type||"scatter"===a.type||"stackedColumn"===a.type||"stackedColumn100"===a.type||"stackedBar"===a.type||"stackedBar100"===a.type||"stackedArea"===a.type||"stackedArea100"===a.type?o+=n.toolTipContent?n.toolTipContent:a.toolTipContent?a.toolTipContent:this.content&&"function"!=typeof this.content?this.content:'<span style="color:{color};">{name}:</span>&nbsp;&nbsp;{y}':"bubble"===a.type?o+=n.toolTipContent?n.toolTipContent:a.toolTipContent?a.toolTipContent:this.content&&"function"!=typeof this.content?this.content:'<span style="color:{color};\'">{name}:</span>&nbsp;&nbsp;{y}, &nbsp;&nbsp;{z}':("pie"===a.type||"doughnut"===a.type)&&(o+=n.toolTipContent?n.toolTipContent:a.toolTipContent?a.toolTipContent:this.content&&"function"!=typeof this.content?this.content:"&nbsp;&nbsp;{y}"),i+=this.chart.replaceKeywordsWithValue(o,n,a,s),e.length-1>h&&(i+="</br>");else a=e[0].dataSeries,n=e[0].dataPoint,s=e[0].index,"line"===a.type||"stepLine"===a.type||"spline"===a.type||"area"===a.type||"splineArea"===a.type||"column"===a.type||"bar"===a.type||"scatter"===a.type||"stackedColumn"===a.type||"stackedColumn100"===a.type||"stackedBar"===a.type||"stackedBar100"===a.type||"stackedArea"===a.type||"stackedArea100"===a.type?o=n.toolTipContent?n.toolTipContent:a.toolTipContent?a.toolTipContent:this.content&&"function"!=typeof this.content?this.content:'<span style="color:{color};">'+(n.label?"{label}":"{x}")+" :</span>&nbsp;&nbsp;{y}":"bubble"===a.type?o=n.toolTipContent?n.toolTipContent:a.toolTipContent?a.toolTipContent:this.content&&"function"!=typeof this.content?this.content:'<span style="color:{color};">'+(n.label?"{label}":"{x}")+":</span>&nbsp;&nbsp;{y}, &nbsp;&nbsp;{z}":("pie"===a.type||"doughnut"===a.type)&&(o=n.toolTipContent?n.toolTipContent:a.toolTipContent?a.toolTipContent:this.content&&"function"!=typeof this.content?this.content:(n.name?"{name}:&nbsp;&nbsp;":n.label?"{label}:&nbsp;&nbsp;":"")+"{y}"),i+=this.chart.replaceKeywordsWithValue(o,n,a,s);return i},C.prototype.enableAnimation=function(){this.container.style.WebkitTransition||(this.container.style.WebkitTransition="left .2s ease-out, bottom .2s ease-out",this.container.style.MozTransition="left .2s ease-out, bottom .2s ease-out",this.container.style.MsTransition="left .2s ease-out, bottom .2s ease-out",this.container.style.transition="left .2s ease-out, bottom .2s ease-out")},C.prototype.disableAnimation=function(){this.container.style.WebkitTransition&&(this.container.style.WebkitTransition="",this.container.style.MozTransition="",this.container.style.MsTransition="",this.container.style.transition="")},C.prototype.hide=function(){this.enabled&&(this.container.style.display="none",this.currentSeriesIndex=-1,this._prevX=0/0,this._prevY=0/0,this.chart.resetOverlayedCanvas())},g.prototype.replaceKeywordsWithValue=function(t,e,i,a){var n=/\{\s*[a-zA-Z]+\s*\}|"[^"]*"|'[^']*'/g,o=this,r=function(t){if('"'===t[0]&&'"'===t[t.length-1]||"'"===t[0]&&"'"===t[t.length-1])return t.slice(1,t.length-1);var n=s(t.slice(1,t.length-1)),r=null;if("color"===n)return e.color?e.color:i.color?i.color:i._colorSet[a%i._colorSet.length];if(e.hasOwnProperty(n))r=e;else{if(!i.hasOwnProperty(n))return"";r=i}return"x"===n?o.axisX&&"dateTime"===o.plotInfo.axisXValueType?L(r[n],e.xValueFormatString?e.xValueFormatString:i.xValueFormatString?i.xValueFormatString:o.axisX&&o.axisX.valueFormatString?o.axisX.valueFormatString:"DD MMM YY",o._cultureInfo):B(r[n],e.xValueFormatString?e.xValueFormatString:i.xValueFormatString?i.xValueFormatString:"#,##0.########",o._cultureInfo):"y"===n?B(r[n],e.yValueFormatString?e.yValueFormatString:i.yValueFormatString?i.yValueFormatString:"#,##0.########",o._cultureInfo):r[n]};return t.replace(n,r)},_.prototype.reset=function(){this.lastObjectId=0,this.objectMap=[],this.rectangularRegionEventSubscriptions=[],this.previousDataPointEventObject=null,this.ghostCtx.clearRect(0,0,this.ghostCanvas.width,this.ghostCanvas.height),this.ghostCtx.beginPath()},_.prototype.getNewObjectTrackingId=function(){return++this.lastObjectId},_.prototype.mouseEventHandler=function(t){if("mousemove"===t.type||"click"===t.type){var e=null,i=null,a=null,n=-1,s=!1,o=!1,r=Y(t),h=this.ghostCtx.getImageData(r.x,r.y,1,1),l=h.data;if(l[3]>240){var c=d(l[0],l[1],l[2]);if(this.objectMap[c]!==void 0&&"dataPoint"===this.objectMap[c].objectType){if(e=this.objectMap[c],i=this.chart.data[e.dataSeriesIndex],a=i.dataPoints[e.dataPointIndex],n=e.dataPointIndex,(null===this.previousDataPointEventObject||this.previousDataPointEventObject.dataSeriesIndex!==e.dataSeriesIndex||this.previousDataPointEventObject.dataPointIndex!==e.dataPointIndex)&&(this.previousDataPointEventObject&&(s=!0),a.mouseover&&a.mouseover.call(a,{x:r.x,y:r.y,dataPoint:a,dataSeries:i,dataPointIndex:n}),!i.mouseover||null!==this.previousDataPointEventObject&&this.previousDataPointEventObject.dataSeriesIndex===e.dataSeriesIndex||(i.mouseover&&i.mouseover.call(i,{x:r.x,y:r.y,dataPoint:a,dataSeries:i,dataPointIndex:n}),this.previousDataPointEventObject&&(o=!0))),"mousemove"===t.type)a.cursor?t.target.style.cursor=a.cursor:i.cursor&&(t.target.style.cursor=i.cursor),a.mousemove&&a.mousemove.call(a,{x:r.x,y:r.y,dataPoint:a,dataSeries:i,dataPointIndex:n}),i.mousemove&&i.mousemove.call(i,{x:r.x,y:r.y,dataPoint:a,dataSeries:i,dataPointIndex:n});else if("click"===t.type){var x=Math.sqrt(Math.pow(this.chart.dragStartPoint.x-r.x,2)+Math.pow(this.chart.dragStartPoint.y-r.y,2));5>x&&(a.click&&a.click.call(a,{x:r.x,y:r.y,dataPoint:a,dataSeries:i,dataPointIndex:n}),i.click&&i.click.call(i,{x:r.x,y:r.y,dataPoint:a,dataSeries:i,dataPointIndex:n}),this.chart.pieDoughnutClickHandler&&this.chart.pieDoughnutClickHandler.call(i,{x:r.x,y:r.y,dataPoint:a,dataSeries:i,dataPointIndex:n}))}}else this.previousDataPointEventObject&&(s=!0,o=!0)}else this.previousDataPointEventObject&&(s=!0,o=!0);if(s||o){t.target.style.cursor=this.chart._defaultCursor;var m=this.chart.data[this.previousDataPointEventObject.dataSeriesIndex],p=m.dataPoints[this.previousDataPointEventObject.dataPointIndex],u=this.previousDataPointEventObject.dataPointIndex;s&&p.mouseout&&p.mouseout.call(p,{x:r.x,y:r.y,dataPoint:p,dataSeries:m,dataPointIndex:u}),o&&m.mouseout&&m.mouseout.call(m,{x:r.x,y:r.y,dataPoint:p,dataSeries:m,dataPointIndex:u})}this.previousDataPointEventObject=e}},t(k,u);var O={drawMarker:function(t,e,i,a,n,s,o,r){if(i){var h=1;i.fillStyle=s?s:"#000000",i.strokeStyle=o?o:"#000000",i.lineWidth=r?r:0,"circle"===a?(i.beginPath(),i.arc(t,e,n/2,0,360,!1),s&&i.fill(),r&&(o?i.stroke():(h=i.globalAlpha,i.globalAlpha=.15,i.strokeStyle="black",i.stroke(),i.globalAlpha=h))):"square"===a?(i.beginPath(),i.rect(t-n/2,e-n/2,n,n),s&&i.fill(),r&&(o?i.stroke():(h=i.globalAlpha,i.globalAlpha=.15,i.strokeStyle="black",i.stroke(),i.globalAlpha=h))):"triangle"===a?(i.beginPath(),i.moveTo(t-n/2,e+n/2),i.lineTo(t+n/2,e+n/2),i.lineTo(t,e-n/2),i.closePath(),s&&i.fill(),r&&(o?i.stroke():(h=i.globalAlpha,i.globalAlpha=.15,i.strokeStyle="black",i.stroke(),i.globalAlpha=h))):"cross"===a&&(i.strokeStyle=s,r=n/4,i.lineWidth=r,i.beginPath(),i.moveTo(t-n/2,e-n/2),i.lineTo(t+n/2,e+n/2),i.stroke(),i.moveTo(t+n/2,e-n/2),i.lineTo(t-n/2,e+n/2),i.stroke())}},drawMarkers:function(t){for(var e=0;t.length>e;e++){var i=t[e];O.drawMarker(i.x,i.y,i.ctx,i.type,i.size,i.color,i.borderColor,i.borderThickness)}}},W={Chart:function(t,e){var i=new g(t,e,this);this.render=function(){i.render()},this.options=i._options},addColorSet:function(t,e){X[t]=e},addCultureInfo:function(t,e){A[t]=e}};W.Chart.version="1.2.1","function"==typeof define&&define.amd?define(function(){return W}):this.CanvasJS=W}).call(this);